<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Rodrigo Araujo | A Jekyll theme</title>
  <meta name="description" content="Thoughts and stories on computer science, software engineering and mathematics">

  <!-- CSS files -->
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/main.css">

  <link rel="canonical" href="/">
  <link rel="alternate" type="application/rss+xml" title="Rodrigo Araujo" href="/feed.xml" />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="/favicon.png">
</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="sidebar cover-card table-cell table-middle">
  <a href="/" class="author_name">Rodrigo Araujo</a>
  <span class="author_job">Computer scientist and SW Engineer</span>
  <span class="author_bio mbm">Thoughts and stories on computer science, software engineering and mathematics</span>
  <nav class="nav">
    <ul class="nav-list">
       
      <li class="nav-item">
        <a href="/about/">About</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="/archive/">Archive</a>
        
          <span>/</span>
        
      </li>
          
      <li class="nav-item">
        <a href="/categories/">Categories</a>
        
          <span>/</span>
        
      </li>
            
      <li class="nav-item">
        <a href="/publications/">publications</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="/readings/">Readings</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="/tags/">Tags</a>
        
          <span>/</span>
        
      </li>
               
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
      <li>
      <script>gen_mail_to_link('rod.dearaujo@gmail.com', 'Hello from website');</script>
      </li>
    
    <li><a href="http://twitter.com/digorithm" class="social-link-item" target="_blank"><i class="fa fa-fw fa-twitter"></i></a></li>
    
    
    
    
    
    
    
    <li><a href="http://github.com/digorithm" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <div class="post-content">
        <h1 style="max-width: 45%;"></h1>
        
<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        8 DEC 2015
      </span>
      
    </p>
    <h4>
      <a href="/post/thoughts-visualizing-software-arch" class="post-title" title="Thoughts on Visualizing Software Architecture">Thoughts on Visualizing Software Architecture</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>The more I think about the advantages and disadvantages of upfront design, the more I find it a really complex subject, I mean, the whole Software architecture diagramming in general. I’ve been following the development of the <a href="http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html">C4 model</a> for a considerable time, I find it interesting, but it still brings me the old struggles about how much detail we should put into the diagrams and whether we should do it while planning the Software, while developing it, or after <em>(by doing reverse engineering)</em>…. or even more extreme, doing these 3 options, developing the architecture diagrams and evolving them over time.</p>

<p>I think that, when drawing architecture diagrams, we should focus on getting the right purpose and the right level of abstraction. Two of the most important purposes to me, when designing a diagram, is:</p>

<ol>
  <li>
    <p>tech stack architecture and how each container and component relate to each other</p>
  </li>
  <li>
    <p>deployment architecture</p>
  </li>
</ol>

<p>I do think that the diagram should reflect the code in certain level of abstraction and that this could be really useful for a new engineer in a large project. Tackling a huge codebase is not an easy task, and the diagrams should act as a map of the code, saying how things communicate with each other.</p>

<p>What I think is, we need certain kinds of architecture diagram, each one for a specific development phase. What comes to my mind is:</p>

<p><strong>Project planning phase</strong>, We can’t code without any plan, at this level I feel necessary to draw the most ‘visible’ containers and components, this way we can plan what to do next, how to split up teams to each part of the system. It’s when a deployment architecture can be written as well</p>

<p><strong>Project evolution and maintenance</strong>, as we reach this phase of the project, it’s interesting to see the Big Picture, the Not-So-Big Picture and the Small Picture. I can see many cases where this could be helpful, for instance: new engineers coming to the project, debugging something that crosses many components or even containers <em>(visualizing the flow can be helpful)</em>, finding bottlenecks, and I’m sure there are many more.</p>

<p>Given this task, I’d prefer taking a top-down approach, going from a more “Big Picture” architecture to a more detailed one. As an example, I’m going to use a side project I was working on, which is a simple webapp to search for simple food recipes <em>(the difference, though, is that it crawls the recipes from other websites)</em>.</p>

<p>I took a backend&amp;api + ClientApp approach, which means, in the backend is where the main logic happens, the core business classes and everything, in addition to exposing a HTTP API <em>(I would say REST API, but I’m scared of a few rest purist coming here and saying that this is not restful because of this and that, so let’s say it’s a simple api that talks over http)</em>.</p>

<p>Each of these 2 parts will be a different application, which can be dockerized and run in different plataforms <em>(two separate amazon EC2, for example)</em>. So, if we’re planning it, we could start by saying:</p>

<p><img src="/content/images/images/gdd20overview.png" alt="" /></p>

<p>So, yea, the webclient will talk to the backend’s api over HTTP, the backend will communicate to the webclient and to a database instance. Ok, that’s a start. We can easily separate a team for the backend and its api and another team for the webclient.</p>

<p>Still, it doesn’t say much about the inner details of each container, and now we need something more detailed. So we detail it a bit more:</p>

<p><img src="/content/images/images/gdd20arch.png" alt="" /></p>

<p>As we can see now, it’s the same structur<em>e, **but with way more details now, which makes it clearer to everybody *(I hope so)</em> how we can tackle the problem with code. An extra level of detail would be going down one more level of abstraction and describe the classes through a class diagram, explaining how the core backend would be implemented, for example.</p>

<p>Now, this diagram, plus all requirements gathered can be a nice start for the coding phase. We can add now how we would deploy it:</p>

<p><img src="/content/images/images/gdd20deploy.png" alt="" /></p>

<p>So, in the end, I believe those 3 diagrams + the codebase could be helpful for a new engineer or to someone that is debugging the system or trying to improve it.</p>

<p>Though, I still have many questions and doubts about this, I can’t stop overthinking it, so I’m extremely open to any discussion about this.</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        16 JUL 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/neural-computation-pt1" class="post-title" title="Neural Computation: Toward an Intuitive Understanding of the Perceptron">Neural Computation: Toward an Intuitive Understanding of the Perceptron</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>Artificial Neurons is one of the most beautiful ways to simulate a biological behavior through computation, despite the fact that it’s not very close to the level of details of a real neuron. But it captured the core of what a neuron is doing.</p>

<p>And I find that trying to understand this mathematical method by first understanding the concept through a metaphor <em>(which, in this case, I think that the metaphor is our mathematical side, and not the biological one, the biological is just, you know, the real thing)</em> is really valuable to gain an intuition on this topic.</p>

<p>If you were about to make a decision, given many variables, how would you make this decision? It may not look obvious, due the fact that, on normal occasions, we’re not thinking about our thinking process, but the truth is, we are collecting those variables that affect the future decision, and we’re giving weights to them. Weights? how? Simple, some variables are more crucial than other while making decision, isn’t it? the word <em>‘crucial’</em>, in this case, means a huge weight on this variable, and it will strongly affect the final decision.</p>

<p>Suppose a scenario: we’re deciding whether we should go to beach or not. Let’s put a few binary variables on table:</p>

<ol>
  <li>Are we in the mood to go to the beach?</li>
  <li>Is it raining?</li>
  <li>Our other friends are going?</li>
  <li>Do we have money?</li>
</ol>

<p>So, depending on those variables, it will be more likely that we will go to the beach… or not. Let’s think about the variable <em>‘is it raining?’</em>, if it’s raining, we can say that it’s a deal breaker, so we can conclude that this variable has more weights than the other. The fact is that we already trained those weights inside our brain, long time ago.</p>

<p>That’s what an Artificial Neuron try to do, the AN try to learn the weights of things so it can make decisions. So, drawing back to the mathematical and computational aspect of it, the perceptron is a single unit that will receive external inputs<em>(variables)</em>, it will have a weight for each input, it will do some computation, send this result to a decision function, and, finally, output the final decision.</p>

<p>Those inputs are the variables we’re talking before, and like our process to make a decision, the Perceptron will weight each input to make a decision.</p>

<p>Now, how the Perceptron knows how the weights should be for each input? Well… it doesn’t. At least, not from the beginning of the learning process, just like you and me, when trying to learn something new.</p>

<p>That’s why this case is a case of supervised learning, what the Perceptron will do is: start with a random small weights, take one previously trained example <em>(e.g: (1) yes to mood to beach, (2) not raining, (3) yes to friends going to beach and (4) yes to money, the output: 1 - yes, we shall go to the beach)</em> do some computation taking in consideration the random weights we defined before, send it to a decision function, output something <em>(1 - yes, 0 - no)</em> and check if this output is equal to the expected <em>(we’re using a trained example, remember?)</em>, of course that at the first try, it won’t be equal. So the Perceptron calculate the error rate and update its weights… after this, guess what? it repeat the process of trying to predict, but now, with the updated weights, after a few tries, the error rate tends to reduce and it starts predicting correctly. So it learned to predict a behavior, by training with previously trained examples.</p>

<p>So, a nice learning behavior would be something like this:</p>

<div class="imgcenter">
	<img src="/content/images/images/perceptron_0.1.gif" />
</div>

<p>Which means, at every iteration <em>(we call it epochs)</em>, the error rate tend to decrease and, as consequence, the Perceptron starts to predict correctly!</p>

<p>As you may have noted, I omitted a few details of the process so you could see the whole picture of the process: we take an example, we practice on it, we see what we missed, we try again, we learn. That’s the core process.</p>

<p>Now, to the details:</p>

<h3 id="the-computation">The computation</h3>

<p>The first step that the Perceptron does it’s a computation that I referred as <em>“some computation”</em>, this is a simple computation, it’s just a simple Linear Combination of the feature vector <em>(the variables)</em> and the weight vector, which is just the sum of the products between feature/input and its respective weight:</p>

<script type="math/tex; mode=display">x_{1}w_{1}+x_{2}w_{2}+x_{3}w_{3}+ \cdots +x_{n}w_{n}</script>

<p> </p>

<h3 id="the-decision-function">The Decision Function</h3>
<p>So, after the Linear Combination, we send the result of it to a decision function, which will, somehow, based on some threshold <em>(or without a threshold as we’re going to see)</em>, give us the output, that will be checked with the correct output, in case if it’s correct, fine, keep the weights like this, otherwise, it will calculate the error rate, adjust the weights and restart the process.</p>

<p> </p>

<h4 id="binary-output-with-threshold">Binary output with threshold</h4>

<p>This technique is very simple, after the linear combination, if the output is bigger than some threshold, it outputs 1 and we say that the neuron was activated, otherwise, output 0.</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{equation}
    X=
    \begin{cases}
      1, & \text{if}\ Linear\,Combination>0 \\
      0, & \text{otherwise}
    \end{cases}
  \end{equation} %]]></script>

<p> </p>

<h4 id="using-sigmoid-function">Using sigmoid function</h4>

<p>Now, that a interesting one, it won’t use a threshold anymore, we’ll send the output of the Linear Combination to a sigmoid function</p>

<script type="math/tex; mode=display">S(\vec{w}\vec{x}) = \dfrac{1}{1+e^{-\vec{w}\vec{x}}}</script>

<p>which will, then, smooth the output, making it in the range of 0 and 1. Which is the most used in many Machine Learning Algorithms.</p>

<div class="imgcenter">
	<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Logistic-curve.svg/600px-Logistic-curve.svg.png" />
</div>

<h3 id="adjusting-the-weights-and-learning">Adjusting the weights and learning</h3>

<p>After the perceptron fails to predict correctly, it’s time to adjust the weight, using some rule, the classic perceptron has 2 rules:</p>

<p> </p>

<h4 id="perceptron-learning-rule">Perceptron Learning Rule</h4>
<p>This is very simple, when the perceptron has the incorrect output, it update its weights following this:</p>

<script type="math/tex; mode=display">w_{i} = w_{i} + \eta (t_{i} - o_{i})x_{i}</script>

<p>Which is simply multiplying a learning rate <em>(usually 0.001)</em> by the difference between the correct output and the wrong output and then multiplying it by its original input, after this, we add this value to the previous weight and then we have the value of the new weight. 
It’s fair simple, isn’t it? The problem arises when the data isn’t linearly separable, like this:</p>

<div class="imgcenter">
	<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/DBSCAN-density-data.svg/2000px-DBSCAN-density-data.svg.png" width="400" />
</div>

<p> </p>

<p>With this scenario, the result just won’t converge. So we adopt another rule!</p>

<p> </p>

<h4 id="delta-rule">Delta Rule</h4>

<p>Now we must find a way to have a non-linear output, and what’s the best for this if not the classic Gradient Descent algorithm? GD will simply search through hypothesis spaces and try to minimize the cost function, I wrote about this <a href="http://rodrigoaraujo.me/general/setup/demo/2015/01/09/Making-Your-Machine-Think-Learn-And-Predict--Gradient-Descent-Algorithm-in-Java.html">here</a>.</p>

<div class="imgcenter">
	<img src="http://www.yaldex.com/game-development/FILES/17fig06.gif" />
</div>

<p>So, it’s just a technique to solve our previous problem, but still, the weights will be updated <em>(now, using the GD)</em> and then the process start over!</p>

<p> </p>

<h3 id="code-of-a-perceptron">Code of a Perceptron</h3>

<p>Now, here’s a code of a Perceptron that will behave like a simple Boolean function. I didn’t use the Delta Dule (Gradient Descent) to optimize the weights, as this problem (binary Boolean functions) is linearly separable.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">math</span>
  <span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">random</span><span class="p">,</span> <span class="n">array</span>
  <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>
  <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

  <span class="k">class</span> <span class="nc">Perceptron</span><span class="p">():</span>
      
      <span class="s">"""
      this is the thereshold to activate the unit 
      """</span>
      <span class="k">def</span> <span class="nf">activation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
          <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">))</span>

      <span class="k">def</span> <span class="nf">linear_combination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
          <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
          <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">)):</span>
              <span class="n">total</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
          <span class="k">return</span> <span class="n">total</span>
      
      <span class="k">def</span> <span class="nf">unit_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">activation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_combination</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>

      <span class="k">def</span> <span class="nf">train</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">training_data</span><span class="p">,</span> <span class="n">epochs</span><span class="p">):</span>
          
          <span class="bp">self</span><span class="o">.</span><span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.5</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>

          <span class="c"># initializing weights</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">training_data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
          
          <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">epochs</span><span class="p">):</span>
              <span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">training_data</span><span class="p">)</span>
              <span class="c"># &gt; calculate output with current weight</span>
              <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_output</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
              <span class="c"># &gt; calculate error rate (t - o)</span>
              <span class="n">error_rate</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">output</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_rate</span><span class="p">)</span>
              <span class="k">print</span> <span class="s">'the X: '</span><span class="p">,</span> <span class="n">X</span>
              <span class="k">print</span> <span class="s">'output: '</span><span class="p">,</span><span class="n">output</span>
              <span class="k">print</span> <span class="s">'correct target: '</span><span class="p">,</span> <span class="n">y</span>
              <span class="c"># &gt; apply learning rule which will update weights</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learning_rate</span> <span class="o">*</span> <span class="n">error_rate</span> <span class="o">*</span> <span class="n">X</span>

      <span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">X</span><span class="p">):</span>
          <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_output</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
          <span class="k">return</span> <span class="n">y</span>
                  

          <span class="n">training_data</span> <span class="o">=</span> <span class="p">[</span>
                  <span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">0</span><span class="p">),</span>
                  <span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">0</span><span class="p">),</span>
                  <span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">0</span><span class="p">),</span>
                  <span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">1</span><span class="p">),</span>
                  
          <span class="p">]</span>

  <span class="n">p</span> <span class="o">=</span> <span class="n">Perceptron</span><span class="p">()</span>

  <span class="n">p</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">training_data</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
  <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">predict</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'errors'</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'epochs'</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

</code></pre>
</div>

<h3 id="conclusion-and-next-steps">Conclusion and next steps</h3>

<p>With this we conclude what a simple single Perceptron is doing! Of course there are many improvements on it and we can connect many of these Artificial Neurons in many layers… that’s what is called Artificial Neural Network, I’ll be writing about it soon!</p>


      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        2 JUL 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/case-study-sentiment-analysis-movie-reviews" class="post-title" title="Case Study: Sentiment Analysis On Movie Reviews">Case Study: Sentiment Analysis On Movie Reviews</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>Well, this case was a fun one, sentiment analysis is a sub type of NLP <em>(natural language processing)</em> in which you have to train a model to analyze a text, and classify it was a negative sentiment or a positive sentiment. In this case, I wanted to apply it on movies reviews, to see if a review is a negative one or a positive one. So, basically, teaching this kind of sentiment to the machine.</p>

<p>There’s a lot of challenges in doing this kind of NLP, experience has told me that when the text is big, it is usually hard to predict things about it… and most of the times, movie reviews are big chunk of text.</p>

<p>That’s the case where I needed to learn and use a few <em>extremely</em> useful things:</p>

<ol>
  <li>Pipeline</li>
  <li>Grid Search</li>
</ol>

<p>These two techniques made total difference in my results. Let’s go through the concept of these two:</p>

<h3 id="pipeline">Pipeline</h3>

<p>In a <a href="http://rodrigoaraujo.me/general/setup/demo/2015/06/30/A-Generic-Architecture-for-Text-Classification.html" target="_blank">previous post</a> I talked about a generic Architecture or Flow to achieve basic text classification tasks, so, Pipeline is a way to automate all those tasks, so, instead of explicitly and separately select features, extract features, train the learning algorithms, you can do all of these things inside the pipeline, and, the amazing scikit learn API gives you an awesome Pipeline interface, pretty similar to a basic estimator’s interface, so you can call methods such as <em>fit, fit_transform, predict</em>, etc…</p>

<p>So you can do even more inside a pipeline, such as new methods for feature extraction/selection, FeatureUnion, use other estimators to select better features for your estimator <em>(do you even neural netception? LOL).</em></p>

<p>Here’s an example of a simple pipeline that does PCA to reduce the dimension of the features and creates a SVC:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    from sklearn.pipeline import Pipeline
    from sklearn.svm import SVC
    from sklearn.decomposition import PCA
    estimators = [('reduce_dim', PCA()), ('svm', SVC())]
    clf = Pipeline(estimators)
</code></pre>
</div>

<h3 id="grid-search">Grid Search</h3>

<p>This was the answer for many hours of pure pain tweaking gazillions of parameters to improve the algorithm’s performance. Grid Search is a way to automate parameters changes, so it can run many times with many different parameters… and choose the best for you, magical, right?</p>

<p>And, once again, the Grid Search object has an interface similar to the basic estimator’s interface, so you can call all the same methods. But, when you create the object grid search, you gotta pass a estimator as parameter… and here’s when things get interesting:</p>

<p>You can pass a pipeline to the grid search. <strong>so much win!</strong></p>

<div class="imgcenter">
	<img src="http://cdn.meme.am/instances2/500x/581044.jpg" />
</div>

<p> </p>

<p>But, the truth is: this operation is <em>extremely</em> expensive, and it’s recommended to use it only on the few first tries, where you don’t know exactly the best parameters values for the task.</p>

<p>Another interesting thing is, after the model inside the grid search is trained, methods like <em>predict</em> are computed using the best features. If we look inside the SKlearn’s grid search’s code, we can see how easily and elegant it’s done:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">scores</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">grid_scores</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">grid_start</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_fits</span><span class="p">,</span> <span class="n">n_folds</span><span class="p">):</span>
    <span class="n">n_test_samples</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">all_scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">this_score</span><span class="p">,</span> <span class="n">this_n_test_samples</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> \
            <span class="n">out</span><span class="p">[</span><span class="n">grid_start</span><span class="p">:</span><span class="n">grid_start</span> <span class="o">+</span> <span class="n">n_folds</span><span class="p">]:</span>
        <span class="n">all_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_score</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iid</span><span class="p">:</span>
            <span class="n">this_score</span> <span class="o">*=</span> <span class="n">this_n_test_samples</span>
            <span class="n">n_test_samples</span> <span class="o">+=</span> <span class="n">this_n_test_samples</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="n">this_score</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iid</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">/=</span> <span class="nb">float</span><span class="p">(</span><span class="n">n_test_samples</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">/=</span> <span class="nb">float</span><span class="p">(</span><span class="n">n_folds</span><span class="p">)</span>
    <span class="n">scores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">score</span><span class="p">,</span> <span class="n">parameters</span><span class="p">))</span>
    <span class="c"># TODO: shall we also store the test_fold_sizes?</span>
    <span class="n">grid_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_CVScoreTuple</span><span class="p">(</span>
        <span class="n">parameters</span><span class="p">,</span>
        <span class="n">score</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">all_scores</span><span class="p">)))</span>
<span class="c"># Store the computed scores</span>
<span class="bp">self</span><span class="o">.</span><span class="n">grid_scores_</span> <span class="o">=</span> <span class="n">grid_scores</span>

<span class="c"># Find the best parameters by comparing on the mean validation score:</span>
<span class="c"># note that `sorted` is deterministic in the way it breaks ties</span>
<span class="n">best</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">grid_scores</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mean_validation_score</span><span class="p">,</span>
              <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="bp">self</span><span class="o">.</span><span class="n">best_params_</span> <span class="o">=</span> <span class="n">best</span><span class="o">.</span><span class="n">parameters</span>
<span class="bp">self</span><span class="o">.</span><span class="n">best_score_</span> <span class="o">=</span> <span class="n">best</span><span class="o">.</span><span class="n">mean_validation_score</span>
</code></pre>
</div>

<p>As you can see, in the end it keeps the best parameters and scores, so it can be used when it needs to predict or output its <em>predict_proba</em> or <em>decision_function</em></p>

<h3 id="correctly-mixing-pipeline-grid-search-and-cross-validation-correctly-the-hidden-wizardry">Correctly mixing Pipeline, Grid Search and Cross Validation correctly: the hidden wizardry</h3>

<p>It’s tricky to mix all these things up, the most dangerous mistake that everybody does sometime is: <strong>using the same dataset to the grid search AND the cross validation</strong></p>

<p>So, here’s a nice technique to avoid this: Split the initial dataset into Development Dataset, which will be used to train the algorithm and to execute the grid search, and the Validation Dataset, which will be passed to the cross_val_score and internally splitted again to avoid bias (CV parameter can configure this).</p>

<p>So, in the end, you train the grid search with a subset of the dataset, and validate it with another subset, avoiding many kind of undesired effects.</p>

<h3 id="the-movie-review-problem">The Movie Review Problem</h3>

<p>Ok, so now let’s head to the real problem. The dataset can be downloaded with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>wget http://www.cs.cornell.edu/people/pabo/movie-review-data/review_polarity.tar.gz
tar xzf review_polarity.tar.gz
</code></pre>
</div>

<p>What I did to solve it was: I used grid search to search a few parameters, such as <em>TfidfVectorizer’s max_features</em>, that in the end I kept with max_features=10000, also its ngram_range, searching between (1,1) and (1,2) and <em>the LinearSVC()’s C parameter</em>.</p>

<p>I used a few other algorithms, but I found the best performance with LinearSVC, though I did not try all the other possibilities <em>(I could create many pipelines to test many algorithms, but my computer would be unusable during many hours, probably, which I couldn’t afford)</em>.</p>

<p>Why Linear SVC?</p>

<p>The Linear SVC is very similar to the SVC object but using the <em>kernel = “linear”</em>. LinearSVC is a type of <em>Support Vector Machines</em>, it’s known that SVMs are effective in <strong>high dimensional spaces</strong>, which is our case here. Also, it can give weights to classes, helping to go through unbalanced datasets
<img src="http://scikit-learn.org/stable/_images/plot_separating_hyperplane_unbalanced_0011.png" alt="" /></p>

<p>And, basically, what the SVMs does is create a hyper-plane (or a set of it) in a high or even infinite dimensional space. And it solves the primal problem:</p>

<div class="imgcenter">
<img src="http://scikit-learn.org/stable/_images/math/396704acdf11cc18d2d02b32275c0ee42d76b95e.png" />
</div>
<p> </p>

<p>Where Xi are the training vectors and Y is a vector in {1,-1}^n.</p>

<p>So, here’s the code where I built the pipeline, the gridsearch, use a subset of the dataset to develop the grid search and another subset to validate using the <em>cross_val_scores</em>, then, I call <em>predict</em> to get the vector of predictions to build a report <em>(or, with this, I can start to build a ROC curve, confusion matrix and other statistics debug tools)</em></p>

<div class="highlighter-rouge"><pre class="highlight"><code>from sklearn.datasets import load_files
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.grid_search import GridSearchCV
from sklearn.pipeline import make_pipeline
from sklearn.svm import LinearSVC
from sklearn.cross_validation import train_test_split
from sklearn.cross_validation import cross_val_score
from sklearn.metrics import classification_report

data = load_files('../txt_sentoken/')

X_train, X_test, y_train, y_test = train_test_split(data.data, data.target, test_size=0.5, random_state=0)

pipeline = make_pipeline(TfidfVectorizer(sublinear_tf=True, max_features=10000), LinearSVC())

parameters = {
        'tfidfvectorizer__ngram_range': [(1,1), (1,2)],
        'linearsvc__C':(.01,.1,1),
        }

grid_search = GridSearchCV(pipeline, parameters, n_jobs=-1) 

grid_search.fit(X_train, y_train)

print("Best score: %0.3f" % grid_search.best_score_)
print("Best parameters iset:")
best_parameters = grid_search.best_estimator_.get_params()
for param_name in sorted(parameters.keys()):
    print("\t%s: %r" % (param_name, best_parameters[param_name]))

print "The model was trained on the full development set"
print "the scores are going to be computed with the evaluation set"
scores = cross_val_score(grid_search, X_test, y_test, cv=5)

print scores.mean(), scores.std()

y_pred = grid_search.predict(X_test)

print classification_report(y_test, y_pred)
</code></pre>
</div>

<p>and the output:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Best score: 0.849

Best parameters iset:
	linearsvc__C: 1
	tfidfvectorizer__ngram_range: (1, 2)

The model was trained on the full development set
the scores are going to be computed with the evaluation set
0.865933623341 0.0281523948704

Classification report:
             precision    recall  f1-score   support

          0       0.88      0.86      0.87       496
          1       0.87      0.88      0.87       504

avg / total       0.87      0.87      0.87      1000
</code></pre>
</div>

<p>So, around 86%~87% of precision/f1-score, not <em>that</em> bad.</p>

<h3 id="further-improvements">Further Improvements</h3>

<p>There are many things I could to do elevate this performance, but due the lack of time to play with this dataset, those improvements will be in a next post.</p>

<p>Possible improvements could be: find and extracting new features, to do this, we gotta understand better this data, extract more information about it. Trying new algorithms and techniques such as Ensemble, Classifiers Combination or Fusion. Stemming and Stop Words could improve it too. If you solved this problem and got a better result, share it with me, I’m very curious about how to improve this!</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        30 JUN 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/generic-architecture-text-classification" class="post-title" title="A Generic Architecture for Text Classification with Machine Learning">A Generic Architecture for Text Classification with Machine Learning</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>One of the most commons tasks in Machine Learning is text classification, which is simply teaching your machine how to read and interpret a text and predict what kind of text it is.</p>

<p>The purpose of this essay is to talk about a simple and generic enough Architecture to a supervised learning text classification. The interesting point of this Architecture is that you can use it as a basic/initial model for many classifications tasks.</p>

<h2 id="supervised-learning">Supervised Learning</h2>

<p>If you’re already familiar with this concept, just jump this step, but I feel it’s important to beginners to know.</p>

<p>Supervised Learning is when you have to first train your model with already existing labeled dataset, just like teaching a kid how to differentiate between a car and a motorcycle, you have to expose its differences, similarities and such. Whereas unsupervised learning is about learning and predicting without a pre-labeled dataset.</p>

<h2 id="starting-to-sketch-the-architecture">Starting to sketch the Architecture</h2>

<p>With the dataset in hands, we start to think about how is going to be our architecture to achieve the given goal, we can resume the steps in:</p>

<ol>
  <li>Cleaning the dataset</li>
  <li>Partitioning the dataset</li>
  <li>Feature Engineering</li>
  <li>Chosing the right Algorithms, Mathematical Models and Methods</li>
  <li>Wrapping everything up</li>
</ol>

<h2 id="cleaning-the-dataset">Cleaning the dataset</h2>

<p>Cleaning the dataset is a crucial initial step in Machine Learning, many Toy Datasets don’t need to be cleaned, because it’s already clean, peer-reviewed and published in a way you can use it exactly to work on the learning algorithms.</p>

<p>The problem is:</p>

<h4 id="the-real-world-is-full-of-painful-and-noisy-datasets">The real world is full of painful and noisy datasets</h4>

<p>If there’s one thing I learned while working with Machine Learning is, there’s no such thing as shiny and perfect dataset in the real world, so we have to deal with this beforehand. Situations where there are many empty fields, wrong and non-homogeneous formats, broken characters, is very common. I won’t talk about such techniques now, but I will write something about it in another post.</p>

<h2 id="partitioning-the-dataset">Partitioning the Dataset</h2>

<p>We always need to partition the dataset in, at least, 2 partitions: the training dataset and the test/validation dataset. Why?</p>

<p>Suppose we fed the learning algorithm with a training data X and it already known the output Y (because it’s a training data pair (X,Y)), which is, for given text X, Y is its classification, the algorithm will learn it.</p>

<p>Great, the algorithm learned this. But now, we’re going to validate the learning, so we use the same data X, I mean, we pass X to the model and ask what’s its classification…</p>

<p>Do you see the problem here?</p>

<p>Of course the algorithm will output Y, the same Y we passed to its training. So, if we pass the complete dataset D in the training phase, then we validate the model using the SAME D dataset, we will be steping onto this very same situation. It’s like cheating, it’s like we point to a car and say “this is a car”, then, at the same time and with the same car, we ask to the kid “is this a car?”, it will be highly probable that the kid will answer correctly, though it may not learned correctly. What we must do is, point to a car and say “this is a car”, and then, point to a different car and ask “is this a car?”.</p>

<p>Stepping out of the metaphor, we must check if the machine learned correctly by using a diferent portion of the dataset.</p>

<p>So, at the end of this step, we’ll have the training dataset and the test dataset, both are subset of the same initial dataset.</p>

<p>With Python’s Scikit Learn you can do this easily using <a href="http://scikit-learn.org/stable/modules/generated/sklearn.cross_validation.train_test_split.html" target="_blank">Train Test Split</a> <em>(read the docs, it’s very simple to use it.)</em>.</p>

<p> </p>

<div class="imgcenter">
<img src="/content/images/images/ml1.png" />
</div>
<p> </p>

<p>##Feature Engineering</p>

<p>This is one of the most important steps when doing Machine Learning. Briefly, Features are the data that the learning algorithm will use as the “X”, which will be used to compute and understand the patterns. A simpler example would be a non-text classification or a regression, e.g: house pricing predictions, where our Features could be: number of rooms, size in squared meters, location and more. As you can see, these feature will describe the patterns of each data point and will affect how the house will be priced.</p>

<p>The crucial point is, features can vary, you can identify new features that can level up your model’s predictions in huge proportions, a simple example would be, in a text classification you count the frequency of each word, this is one feature… you feed your learning algorithm with it… and the result isn’t enough: 50% of precision. But then you see that, in this case, the length of the whole data point (the text) plays a huge role determining a pattern for each class. Now that you <strong>identified</strong> this feature, you do something to <strong>extract</strong> that feature and then add this new feature and feed your learning algorithm with it, then, the result: 95% of precision.</p>

<p>Ok, so you know the importance of the feature engineering phase, now it’s time to understand the most common technique to extract feature in texts: <strong>TF-IDF</strong></p>

<p> </p>

<h4 id="tf-idf">TF-IDF</h4>

<p>Though the most intuitive way to look for patterns in texts is to count each word in the text (and use it as a Feature), it may not be the best way to do it. A few reasons for it is, larger texts will have higher averages than the shorter texts, these discrepancies can hurt the learning algorithm, and this Feature <strong>doesn’t say much about the importance of the words</strong>, which is very important to find patterns.</p>

<p>So, instead of computing the occurrence, it’s better to compute the importance of the words. to accomplish this we can use 2 statistic’s techniques:</p>

<p><strong>TF</strong> - which is basically the raw frequency of the word given the document, raw frequency of t by f(t,d), then the simple tf scheme is tf(t,d) = f(t,d).</p>

<p><strong>IDF</strong> - Inverse Document Frequency, which is a technique to give emphasis to words that <em>don’t appear with high frequency</em>, because these are the words that can differentiate the texts, which means, in this case, these are the most important words, so we inverse its frequencies. So, an example, if the word <em>“the”</em> happens to appear very often in a text, it will weight <strong>less</strong>, because it’s a common word, thus, don’t cause very impact when fiding patterns to differentiate the texts.</p>

<p>So the whole TF-IDF can be computed by</p>

<p><img src="https://upload.wikimedia.org/math/e/8/1/e81492e44713270fd230d821ccebd100.png" alt="" /></p>

<p>Scikit Learn gives us a great API to use the TF-IDF method, it’s really simple.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    from sklearn.feature_extraction.text import TfidfVectorizer

    vectorizer = TfidfVectorizer()
    vectorized_x = vectorizer.fit_transform(X)
</code></pre>
</div>

<p>Which will do the TF-IDF on the X data, and then vectorize this data, in other words, transform the whole thing into an array of inverse frequencies.
So, extracting those features, <strong>this</strong> will be our training and test data, that will feed the algorithm (along with the Y, which is the output, the class of each training data).</p>

<p>Re-thinking our Architecture, now we have:</p>

<p> </p>

<div class="imgcenter">
<img src="/content/images/images/ml2.svg" />
</div>
<p> </p>

<p>Remembering that X is the set of features (e.g: vector with the TF-IDF of each data point) and Y is the output, which is, the labels/class (e.g: Spam or not-spam).</p>

<h2 id="chosing-the-right-algorithms-mathematical-models-and-methods">Chosing the right Algorithms, Mathematical Models and Methods</h2>

<p>With the data prepared, features selected and extracted, it’s time to feed the algorithm with this data, this topic <em>per se</em> could go pages and pages, as learning algorithms is such a huge fields, with many publications and ideas to solve every kind of problem.</p>

<p>To not extend it very much, and as the purpose of this essay is to discuss the architecture, I’ll use a few commons algorithms, such as Logistic Regression, Decision Trees, SVM and Neural Networks.</p>

<p>So, at this point, we’ll treat the learning algorithm as a black-box algorithm, where it:</p>

<ol>
  <li>receive a training data X which is a vector of features, and training data Y, which is the label/class/output (we can binarize it, such as spam=1, ham=0)</li>
  <li>return a model, where given an text X, can output its predicted class Y.</li>
</ol>

<p>After generating this model, we will test it with our test dataset and check its performance, if it can predict correctly <em>(the test dataset has output values (Y) so we can check them)</em>, it is ready to predict new data <em>(data completely outside our initial dataset)</em>, so we say that the machine learned the task.</p>

<p>Our architecure now:</p>

<p> </p>

<div class="imgcenter">
<img src="/content/images/images/ml3.svg" height="800" />
</div>
<p> </p>

<h2 id="wrapping-everything-up">Wrapping everything up</h2>

<p>With this architecture, we should be able to do most of the simple text classification tasks, as the main flow is: get data, clean data, identify and extract features, train your algorithm/mathematical model of choice, validate it and then, use the generated model to do the estimations.</p>

<p>Of course there are many improvements that can be made on this architecture and many, many, many lower level details, but you can see this architecture as a <em>“boilerplate code”</em> to get you started with the machine learning engineering task.</p>

<p>A few tips:</p>

<p>Learn the underlying mathematical models of the most commons learning algorithms, this will teach you the trade offs of each one, so you can apply the correct algorithms to the given dataset and scenario. For example, SVM can be good for unbalanced dataset, but why? You gotta know this. Neural Networks can be slow to be trained, but, if training time is not critical, it’s okay to use Neural Networks.</p>

<p>Master the skills to clean data, if using Python, learn to use Pandas. This will be an extremely important skill.</p>

<p>Master the skills to understand data, this will be crucial to make you see what algorithm to use, you can’t make something learn if you don’t know about what you are teaching.</p>


      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        19 JUN 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/case-study-python-performance-rotating-vector" class="post-title" title="Case Study: Python Performance on rotating one-dimensional vectors">Case Study: Python Performance on rotating one-dimensional vectors</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>I’m a big fan of a nice challenge, therefore, I like books like Programming Pearls, I like to dive into many kinds of solutions to the same problem and try to differentiate them by novelty, performance, elegance, etc…</p>

<p>This time I was playing with a fun problem, from the column 2:</p>

<blockquote>
  <p>“rotate a one dimensional array of <em>N</em> elements left by <em>I</em> positions”.</p>
</blockquote>

<p>The author says it should consume little space and time, so, there are many solutions, obviously. The fun thing is that I was doing it in Python, so you can solve it in many ways, but you can decrease the performance a lot if you choose poorly. In C we could just swap pointers in a doubly linked list, which is what happens in the real implementation of CPython.</p>

<p>The idea that the Author exposed is pretty clever, which is based in reversing the vector only 3 times:</p>

<ol>
  <li>Reverse the vector, from the first position to the <em>I</em>-th position, where <em>I</em> is the number of position that is wanted to move to the left</li>
  <li>Reverse the vector, from <em>I</em>-th + 1 position to <em>N</em>, where <em>N</em> is the size of this vector</li>
  <li>Reverse the whole vector, again.</li>
</ol>

<p>In other words, we have the vector <em>AB</em> (Where <em>A</em> is the first part, <em>B</em> is the second), we reverse <em>A</em> so we have <em>Ar</em>, reverse <em>B</em> so we have <em>Br</em>, now we have <em>ArBr</em>, then we reverse the whole thing <em>(ArBr)r</em>, after that, we have the rotated vector. It’s quite beautiful. A picture can help the visualization:</p>

<div class="imgcenter">
<img src="/content/images/images/img1.jpeg" height="450" />
</div>

<p>here’s an example with a simple vector:</p>

<div class="imgcenter">
<img src="/content/images/images/img2.jpeg" height="350" />
</div>

<p>Now, searching for other approaches, I looked inside the code from CPython, and there’s a nice comment:</p>

<div class="highlighter-rouge"><pre class="highlight"><code> "Conceptually, a rotate by one is equivalent to a pop on one side and an append on the other"
</code></pre>
</div>

<p>Quite elegant solution as well. So, an example:</p>

<div class="imgcenter">
<img src="/content/images/images/img4.jpeg" height="350" />
</div>

<p>And the last example I found while searching through Pythonic ways to solve this problem (Even though may not be very fast)</p>

<pre>
<code class="python hljs">
def rotate_pythonic_way(arr, i):
         return arr[i:] + arr[:i] 
</code>
</pre>
<p>Which is super simple and elegant, what it’s doing is the following:</p>

<div class="imgcenter">
<img src="/content/images/images/img3.jpeg" height="350" />
</div>

<p>At first I thought this solution would be the slowest, but we’ll get to that.</p>

<p>One thing that took my attention was the internal method to reverse a list that Python offers, there are two of them, one returns a reversed iterator and you can cast it into a list and the other reverse the exactly same list that is passed as parameter, it shouldn’t take you long to realize which is faster. So I wrote a code with the many solutions to it and I profiled the functions, which gave us a interesting result when ran over a vector with 10 millions integers.</p>

<p>First, the original idea (<em>reverse the vector 3 times</em>), but using the reversed(array) method:</p>

<pre>
<code class="python hljs">
def rotate_original_solution_with_reversed(arr, i):
    n = len(arr)
    array_A_reversed = list(reversed(arr[0:i]))
    array_B_reversed = list(reversed(arr[i:n]))
    ArBr = array_A_reversed + array_B_reversed
    rotated_array = list(reversed(ArBr))
    return rotated_array
</code>
</pre>

<p>and the result:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    Original Idea using reversed(arr): 

    4 function calls in 0.611 seconds

    Ordered by: standard name

    ncalls tottime percall cumtime percall filename:lineno(function)
    1 0.440 0.440 0.440 0.440 2_1b.py:21(rotate_original_solution_with_reversed)
    1 0.171 0.171 0.611 0.611 string:1 module
    1 0.000 0.000 0.000 0.000 {len}
</code></pre>
</div>

<p>####Damn, 0.6s, that’s too slow!</p>

<p>After this one, I changed the way I was reversing the vector, using the other internal method from Python:</p>

<pre>
<code class="python hljs">
def rotate_original_solution_with_reverse(arr, i):
    n = len(arr)
    
    array_A = arr[0:i]
    array_B = arr[i:n]
    
    array_A.reverse()
    array_B.reverse()

    ArBr = array_A + array_B
    ArBr.reverse()
    return ArBr
</code>
</pre>

<p>And the result:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    Original Idea using arr.reversed(): 
    7 function calls in 0.322 seconds

    Ordered by: standard name

    ncalls tottime percall cumtime percall filename:lineno(function)
    1 0.187 0.187 0.210 0.210 2_1b.py:30(rotate_original_solution_with_reverse)
    1 0.113 0.113 0.322 0.322 string:1 module
    1 0.000 0.000 0.000 0.000 {len}
    1 0.000 0.000 0.000 0.000 {method 'disable' of '_lsprof.Profiler' objects}
    3 0.023 0.008 0.023 0.008 {method 'reverse' of 'list' objects}
</code></pre>
</div>

<p>####From 0.6s to 0.3s, that’s a great improvement. lesson: choose your built-ins/Data Structures/Algorithms carefully.</p>

<p>And now, using the Pythonic Way, which I was thinking that would be the slowest:</p>

<p>And the result:</p>

<pre>
<code class="bash hljs">
Pythonic Way: 

3 function calls in 0.295 seconds

Ordered by: standard name

ncalls tottime percall cumtime percall filename:lineno(function)
1 0.238 0.238 0.238 0.238 2_1b.py:45(rotate_pythonic_way)
1 0.056 0.056 0.295 0.295 string:1(module)
1 0.000 0.000 0.000 0.000 {method 'disable' of '_lsprof.Profiler' objects}

</code>
</pre>

<p>It was faster than the other methods! Well played, Python.</p>

<p>And the last one, using the pop/append technique, repeated i times:</p>

<p>And the result:</p>
<pre>
<code class="bash hljs">

Pop and append way: 

5 function calls in 0.013 seconds

Ordered by: standard name

ncalls tottime percall cumtime percall filename:lineno(function)
1 0.000 0.000 0.013 0.013 2_1b.py:49(rotate_pop_append)
1 0.000 0.000 0.013 0.013 string:1(module)
1 0.000 0.000 0.000 0.000 {method 'append' of 'list' objects}
1 0.000 0.000 0.000 0.000 {method 'disable' of '_lsprof.Profiler' objects}
1 0.013 0.013 0.013 0.013 {method 'pop' of 'list' objects}
</code>
</pre>

<p>Ok. That was weird. 0.013 seconds?  13 milliseconds? Crazy, right? I thought the fact of repeating it many times would make it go way slower, but I guess I was wrong!</p>

<p>So, as you can see, an interesting problem can have many solutions, one more elegant, others faster. In the end you may pick the simplest and most intuitive solution, this may be the best for the situation. Some times you gotta go with the strangest and most non-intuitive solution (which reminds me the first time I saw the Quick Sort and all its non-intuitive way to think)</p>

<p>So, if you’re willing to reverse a list with Python, go with List.reverse() method (unless you want the iterators to do something), and if you want to rotate a vector, go with pop/append, it looks faster.</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        25 MAY 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/web-scaling-using-redis-as-cache" class="post-title" title="Web Scaling - using Redis as Cache">Web Scaling - using Redis as Cache</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p><strong>Redis is such a great technology.</strong> Unfortunately, there’s still people who don’t know Redis or don’t know that Redis can be used as a Cache System to improve the speed of responses.</p>

<h2 id="why-redis">Why Redis</h2>

<p>Well, let’s start this discussion remembering how a common Relational Database basically works: Suppose we’re using a MySQL, every time your app sends a request to the MySQL client, the MySQL client gotta make a trip to the hard drive to get the data asked in the request, this can become a problem if the data asked in request is big… and if there are many requests at the same time, this can generate a huge latency, annoying users or worse.</p>

<p>This is where Redis comes into play, Redis is a key-value database that will be running and storing data inside your memory, if you remember the basic of computers architecture:</p>

<p><img src="/content/images/2015/06/memchart.jpg" alt="" /></p>

<p>It’s way faster to access data in memory (Physical RAM, main memory) than to access data in the Hard Drive, so it’s easy to notice that if the data that the application wants to access is inside the main memory, it’s way easier to reach to that data than if it was stored in the Hard Drive.</p>

<p>So, like I said, Redis will be storing its data inside the memory, but you may ask yourself: “but what if I turn off the machine?? isn’t the ram memory volatile? “ Yes, that’s why Redis will be flushing the data to the hard drive from time to time, it’s up to you to choose this time between flushes, it’s all about Performance vs. Security.</p>

<p>So, What we’ll be doing is just:</p>

<p><img src="/content/images/2015/06/atv1.png" width="350" height="400" /></p>

<p><em>note that this print is taken from a talk I gave in my country, so it’s in portuguese. aplicação = application, Não acha key = key don’t found, retorna dados = return data</em></p>

<p><strong>As you can see: So much win. We avoided redundant trips to the disk.</strong></p>

<p>Now that we understand the concept of what we’ll be doing, the code becomes very easy to implement, here’s a simple idea <em>(thougt it can be improved and extended in many ways, but it can demonstrate the idea we’re working here)</em></p>

<pre>
<code class="python hljs">
    from flask import Flask
    from flask.ext.sqlalchemy import SQLAlchemy
    from sqlalchemy import create_engine
    import redis

    app = Flask(__name__)
    url = 'mysql+pymysql://username:password@ip/dbname'
    app.config['SQLALCHEMY_DATABASE_URI'] = url
    db = SQLAlchemy(app)
    cache = redis.StrictRedis(host='localhost', port=6379, db=0)

    #improvement: model could stay in a different file
    class User(db.Model):
        id = db.Column(db.Integer, primary_key=True)
        username = db.Column(db.String(80))
        email = db.Column(db.String(120))

        def __init__(self, username, email):
            self.username = username
            self.email = email

        def __repr__(self):
            return '' % self.username

    def createUsers():
            for x in xrange(0,100000):
                user = User('test', 'test')
                db.session.add(user)
            db.session.commit()

    def getUsers():
            users = cache.get('users')
            if not users:
                users = User.query.all()
                cache.set('users', users)

    # improvement: views/routing should stay in a different file
    @app.route('/')
    def hello_world():
        getUsers()
        return 'Hello Worldd!'

    if __name__ == '__main__':
        app.debug=True
        app.run(host='0.0.0.0')
</code>
</pre>

<p>So, after you create the correct database, populate the database (there’s a function in the code for that) and change username/password/dbname in the code, we’ll run the app.py and go to localhost:port-you-exposed.</p>

<h2 id="what-will-happen"><em>What will happen?</em></h2>

<p>1. The first time you access it, it will take a few seconds to get the data from the MySQL</p>

<p>2. The second time you access it, it will take just a few milliseconds to get the same data from redis</p>

<p>In my computer the result was:</p>

<p>first access: 45861 milliseconds</p>

<p><strong>second access: 5ms</strong></p>

<p><strong>I know, right? That’s just blazing fast!</strong></p>

<p>And it can save a lot of computational resources and human time. Now, with this logic applied to one method (the method to get users), we can apply it to whichever method we want, or we can even create a generic decorator and annotate the methods that we want do the caching!!</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        22 APR 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/build-your-first-rest-api-python" class="post-title" title="Building your first REST API with Python">Building your first REST API with Python</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>Are you total lost in this world full of jargons like: API, Rest API, microservices and stuffs? Come here, sit, grab a cup of coffee, and let’s talk briefly about it.</p>

<p>Today a lot is said about APIs. Everything has an API, every programmer (newbie to expert) uses tons of API. Also, today we can see a lot of people talking about microservices and the idea of total separation of backend, frontend, web services or <em>whatever</em>. So we can <em>(and we do)</em> hear a lot about REST/RESTful APIs. We have 3 current problems with it:</p>

<p>1. Many new programmers don’t have a single clue of what a Rest API is.</p>

<p>2. It’s probable that they’re using Rest APIs and don’t know about it.</p>

<p>3. When they feel that they should learn more about it, there’s hardly any good and accessible material to learn it.</p>

<h3 id="so-heres-a-extremely-simplistic-approach-to-try-to-explain-what-is-a-rest-api">So here’s a extremely simplistic approach to try to explain what is a Rest API</h3>

<p>Starting with the concept of API, which stands for <strong>A</strong>pplication <strong>P</strong>rogramming <strong>I</strong>nterface, it’s just an interface which you, <em>dear programmer</em>, will be dealing with to extract whatever you <em>(or your program)</em> want.</p>

<p>Suppose your program needs to create a connection with a given database, normally you do:</p>

<p>1. You import the <em>library</em> that will abstract the connection with the database</p>

<p>2. You create an object to represent a Connection with the database</p>

<p>3. You call functions that this object provide to you, so you can do whatever you want (and whatever they provide)</p>

<p>Here’s a silly example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>from database_library import Connection

connection = Connection()
connection.OpenConnection()
… do whatever you want
connection.CloseConnection()
</code></pre>
</div>

<p>When you called those function, you were dealing with the interface that the object provided to you, sure the object may be doing thousand of things at the moment you call its functions, but, it doesn’t matter to you, does it? You just want the <em>damn</em> connection open and then closed.</p>

<p>So the library that you imported is giving you something you want, offering a service or a resource. That’s the sole purpose of an API. It’s a layer that you can use to get things from other(s) component(s).</p>

<p>So, it’s easy to deduct that, the better the engineer planned the API, the easier it will be to deal with and extract what you want, and the contrary is true.</p>

<p>But still, you’re processing the core of this API in your own machine, which isn’t that great, here’s when the API evolves to whole web hosted services, so you can request this API something, and this API can give you something, through the WEB, via HTTP request. And that’s amazing.</p>

<p>And the community, recently, decided that the request and response that happen between applications and APIs, should be done with JSON, so this communication can become uniform and APIs can talk to other APIs effortlessly.</p>

<p>So, basically, what’s going on is:</p>

<p><img src="/content/images/2015/06/json-rest3.png" alt="" /></p>

<p>So… yes, you make your function calls, now, with just a simple URL + HTTP methods, wanna see a real example? We can just send a request to the Facebook’s API by accessing this URL: <a href="http://graph.facebook.com/contatodigo">http://graph.facebook.com/contatodigo</a></p>

<p>Which will request my profile’s data, and the Facebook’s API will return:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100001638888259"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rodrigo"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"male"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ara\u00fajo"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.facebook.com/contatodigo"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pt_BR"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rodrigo Ara\u00fajo"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contatodigo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>As simple as that.</p>

<p>Now with this basic idea explained, we can do a simple Rest API using Python and Flask. (I’m assuming you’re already familiar with both technologies).</p>

<p>All we’re gonna do is, using the flask routing, create routes to the users so they can interact with the resources of our API. Let’s suppose our API will serve and receive only Books. So this is the resource we’re dealing with, users may use our API to get Books and insert new Books, so our only URIs will be:</p>

<p>1. <em>/bookapi/v1.0/books</em> with a GET method, which will just return the list of books</p>

<p>2. <em>/bookapi/v1.0/books</em> with a POST method, which will insert a book</p>

<p>So after the API is built, you or you program can get books or insert books by sending HTTP request to the API’s URIs, simple as that. I’ll be very straight forward, here’s the code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!flask/bin/python</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">request</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="n">books</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">'title'</span><span class="p">:</span> <span class="s">u'Game of Thrones'</span><span class="p">,</span>
        <span class="s">'description'</span><span class="p">:</span> <span class="s">u'Cool dragons'</span><span class="p">,</span> 
        <span class="s">'finished'</span><span class="p">:</span> <span class="bp">False</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'title'</span><span class="p">:</span> <span class="s">u'50 shadows of grey'</span><span class="p">,</span>
        <span class="s">'description'</span><span class="p">:</span> <span class="s">u'It start as bullshit, end as a huge bullshit'</span><span class="p">,</span> 
        <span class="s">'finished'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/bookapi/v1.0/books/'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_books</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">'books'</span><span class="p">:</span> <span class="n">books</span><span class="p">})</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/bookapi/v1.0/books'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">create_book</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span> <span class="ow">or</span> <span class="ow">not</span> <span class="s">'title'</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">:</span>
        <span class="n">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>

    <span class="n">book</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'id'</span><span class="p">:</span> <span class="n">books</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s">'id'</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">'title'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s">'title'</span><span class="p">],</span>
            <span class="s">'description'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'description'</span><span class="p">,</span> <span class="s">""</span><span class="p">),</span>
            <span class="s">'finished'</span><span class="p">:</span> <span class="bp">False</span>
            <span class="p">}</span>

    <span class="n">books</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">'book'</span><span class="p">:</span> <span class="n">book</span><span class="p">}),</span> <span class="mi">201</span> 

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
</div>

<p>Note that we’re creating a simple in-memory <em>database</em>, which is a simple python’s dict. This could be a database. But for the sake of simplicity, I’m using just a dict.</p>

<p>When the requests come, it verifies the route that the user is asking for, which is: what resources is he/she wanting? and then, the code do whatever it must do (<em>remember the API idea of hiding the complexity, the user requesting just want the result</em>), and then it put everything in a JSON and returns it. That simple!</p>

<p>Of course, many improvements and extensions (<em>there are infinity possibilities</em>) can be made to this code, but, here’s a skeleton of the idea of an API, it’s just a start. One good practice it’s to <em>not</em> return the ID of the resource, but return just its URI, which is surely a great idea. Another good practice is to ask authentication in every HTTP request, so your API won’t be exposed to everybody. There are, indeed, endless improvements, but in this code, you, that are completely beginner to the API’s concept, can now understand what’s going on underneath and start planning and building your own API using Flask.</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        31 MAR 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/using-python-and-ai-to-predict-wine" class="post-title" title="Using Python and AI to predict types of wine">Using Python and AI to predict types of wine</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>I’ve been working with AI/Machine Learning at <a href="http://www.jusbrasil.com.br/">Jusbrasil</a> recently, and it’s being pretty challenging due to the <em>huge</em> amount of data that we have to deal with, so cleaning this data and making predictions and classifications in an acceptable time demands a nice AI architecture.</p>

<p>That said I can say that I’m extremely thankful for a few technologies that are helping me go through this challenge <em>(and the pain of cleaning this amount of data)</em>: Python, Scikit Learn, Pandas, and the whole stack that the Scikit Learn use, such as NumPy, SciPy, matplotlib and few others.</p>

<p>So, this inspired me to <em>spread the word</em>, so I’ll be showing here a simple example of Machine Learning using Python, Pandas and Scikit Learn to predict, given a great amount of data/features about wines, if a wine is white or red.</p>

<p><strong>disclaimer:</strong> <em>I’m assuming that you already have a small knowledge on the ideas of the machine learning and its mathematical aspects (although not necessary to implement the code that I’ll show here), this is just a simple introduction to scikit learn and its power, so the example is pretty simple and straight forward, if you just want the code, here it is: <a href="https://gist.github.com/digorithm/ad742f9314f76e732888">github link</a></em></p>

<h2 id="whats-pandas">What’s Pandas?</h2>

<p>Pandas is an amazing library for data manipulation, it makes the process of dealing with data very easy and straight forward, we can work with CSV, JSON and plenty other formats without struggling to manipulate the data, <a href="https://signalvnoise.com/posts/3124-give-it-five-minutes">give it five minutes</a> and skim their <a href="http://pandas.pydata.org/pandas-docs/dev/">docs</a>, it will definitely worth it!</p>

<h2 id="fetching-the-data">Fetching the data</h2>

<p>Let’s start fetching the data with Pandas, <em>(you can download the data <a href="https://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/">here</a>)</em> to do so, just import Pandas and read the CSV file, just like that:</p>

<pre>
<code class="python hljs">
import pandas as pd
reds = pd.read_csv('winequality-red.csv', sep=';')
whites = pd.read_csv('winequality-white.csv', sep=';')
</code>
</pre>

<p>We can see how the data is structured by doing a few commands:</p>

<pre>
<code class="python hljs">
reds.values[0:6]
</code>
</pre>

<p>As output, we have the first 5 rows of the red wine’s data</p>

<pre>
<code class="python hljs">
array([[7.4, 0.7, 0.0, 1.9, 0.076, 11.0, 34.0, 0.9978, 3.51, 0.56, 9.4, 5],
       [7.8, 0.88, 0.0, 2.6, 0.098, 25.0, 67.0, 0.9968, 3.2, 0.68, 9.8, 5],
       [7.8, 0.76, 0.04, 2.3, 0.092, 15.0, 54.0, 0.997, 3.26, 0.65, 9.8, 5],
       [11.2, 0.28, 0.56, 1.9, 0.075, 17.0, 60.0, 0.998, 3.16, 0.58, 9.8,6],
       [7.4, 0.7, 0.0, 1.9, 0.076, 11.0, 34.0, 0.9978, 3.51, 0.56, 9.4, 5],
       [7.4, 0.66, 0.0, 1.8, 0.075, 13.0, 40.0, 0.9978, 3.51, 0.56, 9.4, 5]], 
dtype=object)
</code>
</pre>

<p>Or we just use a function from Pandas that describe very well our data</p>

<pre>
<code class="python hljs">
reds.head()
</code>
</pre>

<pre>
<code class="python hljs">

&lt;class 'pandas.core.frame.dataframe'=""&gt;Int64Index: 5 entries, 0 to 4
Data columns:
fixed acidity           5  non-null values
volatile acidity        5  non-null values
citric acid             5  non-null values
residual sugar          5  non-null values
chlorides               5  non-null values
free sulfur dioxide     5  non-null values
total sulfur dioxide    5  non-null values
density                 5  non-null values
pH                      5  non-null values
sulphates               5  non-null values
alcohol                 5  non-null values
quality                 5  non-null values
dtypes: float64(11), int64(1), object(1)&lt;/class&gt;
</code>
</pre>

<h2 id="understanding-our-data">Understanding our data</h2>

<p>Matplotlib gives you many ways to plot our data into graphs so we can understand what is going on with the data so we can choose the best model/algorithm for the given scenario,</p>

<p>For instance, let’s take a look at the relation between the red wines and its fixed acidity</p>

<pre>
<code class="python hljs">
x = plt.subplots(figsize=(10, 5))
plt.plot(reds.index, reds.get("fixed acidity"), 'ro')
ax.set_title('Wines vs fixed acidity')
ax.set_xlabel('red wine index')
ax.set_ylabel('Fixed Acidity')
plt.show()
</code>
</pre>

<p><img src="/content/images/2015/06/mlproblem.png" alt="" /></p>

<h2 id="preparing-the-data-for-classification">Preparing the Data for classification</h2>

<p>Now we’re going to add a new feature/variable to our data, which is our target variable, the <em>Y</em>, that will be telling if the wine from our dataset is white or red</p>

<pre>
<code class="python hljs">
reds['kind'] = 'red'
whites['kind'] = 'white'
</code>
</pre>

<p>We need to get all of our feature into a vector called X, that will be set into our algorithm, right? And, we need to get all our targets (white or red) and set into a Y variable</p>

<pre>
<code class="python hljs">
wines = reds.append(whites, ignore_index=True)
X = wines.ix[:, 0:-1]
y = wines.kind
</code>
</pre>

<p>Notice that we’re merging both datasets together, the one with the red wines and the one with the white wines, so we can send them together to the algorithm. Now we’re going to binarize the labels ‘white’ and ‘red’, so the mathematical model can use it. It’s pretty simple</p>

<pre>
<code class="python hljs">
y = y.apply(lambda val: 0 if val == 'white' else 1)
</code>
</pre>

<h2 id="the-algorithm">The algorithm</h2>

<p>Now that we have our data well structured and we do understand it, we can start looking for an algorithm to use. A good algorithm for our scenario is a simple <strong>Logistic Regression</strong>, that will return a model that we’ll use to make our predictions/classification. The mathematical linear model that will use is the following:</p>

<script type="math/tex; mode=display">f(w) := \lambda\, R(w) + \frac1n \sum_{i=1}^n L(w;x_i,y_i) \label{eq:regPrimal}\</script>

<p>In addition with the loss function defined by the logistic loss</p>

<script type="math/tex; mode=display">L(w;x,y) := \log(1+\exp( -y w^T x ))</script>

<p>The Scikit learn provides an awesome library with an amazingly ease of use, so that we don’t have to implement the whole model from scratch. All we have to do is create a object from the model we want to use, understand how it works <em>(at least understand how to use its interface to do what we want)</em>. In this case, we will be using the <em>cross validation</em> object, which is another discussion for another time, but in a few words, it will divide our dataset and test it against all parts of the divided dataset, this way we make sure that we’re validating the quality of the result.</p>

<pre>
<code class="python hljs">
clf = LogisticRegression()
scores = cross_val_score(clf, X, y, cv=5)
print scores.mean(), scores.std()
</code>
</pre>

<p>And as the result we get:</p>

<pre>
<code class="python hljs">
0.981376321334 0.00638795038332
</code>
</pre>

<p>And that’s the exactly the precision of the algorithm over the given dataset, <strong>98% of precision</strong>, which is quite good! Now, for example, we can save this trained classifier and use it for future classifications of incoming data about wines that need to be classified as white or red, to do so, we just call the method <em>clf.predict(X)</em> where this X will be the new wine’s data. simplicity at its best!</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        9 JAN 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/articles/2015-01/Making-Your-Machine-Think-Learn-And-Predict-Gradient-Descent-Algorithm-in-Java" class="post-title" title="Making your machine think, learn and predict - Gradient Descent Algorithm in Java">Making your machine think, learn and predict - Gradient Descent Algorithm in Java</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <h2 id="how-can-we-make-a-machine-learn-from-data">How can we make a machine learn from data?</h2>

<p>Then, how can we make the machine predicts things based on that learned data? Those are the question answered by one of the most classic Machine Learning Algorithms, the <strong>Gradient Descent Algorithm</strong>, from a Mathematical-Statistical side it’s called <strong>Univariate Linear Regression</strong>.</p>

<p>This is one of the tools of the Machine Learning toolbox, and what it tries to do is to model a relationship between a scalar dependent variable Y and a explanatory variable X.</p>

<h2 id="in-laymans-term">In Layman’s term…</h2>

<p>Let’s suppose you have a few points distributed in a Graph, so you already know that in a point A you have a well defined X and Y, which means, if you input X, your output will be Y, and in a point B you have a well defined X’ and Y’ as well. But, thing is, if a point emerge between A and B, and you only have the X… what will be the Y <em>(the output)</em>?</p>

<p>What this algorithm does is: <strong>It tries to predict this Y value, based on the previous data</strong>! Amazing, right?</p>

<p>At the end of the execution, you’ll have a full trend line that you can use to predict values! just like the image below.</p>

<p><img src="/content/images/2015/06/linearRegression.png" alt="" /></p>

<h2 id="the-theory-behind-it">The Theory Behind It</h2>

<p>I’ll cover a few theories about this algorithm here, but, it won’t be complete, as this demand a great coverage of mathematical material that if I would write it all here, It would be a <em>long, long</em>, <strong>very</strong> <em>long</em> post. So I’m assuming that you’re already familiar with Calculus <em>(Sums, Partial Derivatives)</em>, Statistics and Discrete Mathematics.</p>

<p>So, our goal here is to <strong>fit the best straight line in our initial data</strong>, right?</p>

<p>Thus, we need something to represent this straight line, which will be our hypothesis function:</p>

<div id="math"> 
$ h_{\Theta}(x) = \Theta_{0} + \Theta_{1}x $ 
</div>

<p>Where this \( \Theta_{0} \) and \( \Theta_{1} \) are the parameters of the function, and <strong>finding the best parameters for this function is what is going to give us the correct straight line to plot on our data</strong>.</p>

<p>Here’s an example of what we’re trying to do, which is, fit the best straight line in the data:</p>

<p><img src="/content/images/2015/06/Linear-regression.svg" alt="" /></p>

<p>So what we want to do is to find a \( \Theta_{0} \) and \( \Theta_{1} \) so our Hypothesis outputs can be very close to the real Y output.</p>

<p>Formally we want:</p>

<div id="math">$ \underset{\Theta_{0}\Theta_{1}}{min}(h_{\Theta}(x) - y)^2 $</div>

<p>So we want <strong>minimize</strong> \( \Theta_{0} \) and \( \Theta_{1} \) so the difference between the <strong>Hypothesis</strong> and the <strong>real output</strong> is minimal.</p>

<p><strong>But we want it for every point in our data</strong>, which is \(x(i)\) <em>(which is the i-th x of our data)</em>, so we want the <strong>sum of this average</strong>, which is, formally:</p>

<div id="math"> 
$ \underset{\Theta_{0}\Theta_{1}}{min}\,\frac{1}{2m} \sum_{i=1}^{m} (h_{0}(x^{(i)}) - y^{(i)})^2 $
</div>
<p><br /></p>

<p>And we’re going to call this function <strong>Cost Function</strong>, with the following notation:</p>

<div id="math"> 
$ J(\Theta_{0}, \Theta_{1}) = \,\frac{1}{2m} \sum_{i=1}^{m} (h_{0}(x^{(i)}) - y^{(i)})^2 $
</div>
<p><br /></p>

<p>So, our goals is to <strong>minimize this cost function</strong>:</p>

<div id="math"> 
$ \underset{\Theta_{0}\Theta_{1}}{min}\,\, J(\Theta_{0}, \Theta_{1}) $
</div>
<p><br /></p>

<p>This cost function is also called <a href="http://en.wikipedia.org/wiki/Mean_squared_error">Square Error Function</a>.</p>

<h3 id="now-the-gradient-descent-algorithm">Now, the gradient descent algorithm</h3>

<p>With our cost function built, we need to “keep” finding values for \( \Theta_{0} \) and \( \Theta_{1} \) so we can reach our ideal trend line. So, basically:</p>

<p>1. We start with some \( \Theta_{0} \) and \( \Theta_{1} \)</p>

<p>2. keep changing \( \Theta_{0} \) and \( \Theta_{1} \) to reduce our cost function \( J(\Theta_{0}, \Theta_{1}) \), until we find the minimum.</p>

<p>That’s quite simple and intuitive, right? There’s a lot of intuitive explanation and more visual examples of what this algorithm is doing in the <a href="https://class.coursera.org/ml-007/">machine learning course taught by Andrews Ng (From Stanford)</a>.</p>

<p>What this algorithm will be doing is: partially derive our cost function for \( \Theta_{0} \) and \( \Theta_{1} \) simultaneously, so we can find the minimum value for them, with every iteration updating our \( \Theta_{0} \) and \( \Theta_{1} \) with their new value!</p>

<blockquote>
  <p><em>- Meh, talk is cheap show me the math!</em></p>
</blockquote>

<p>Formally, the algorithm is:</p>

<div id="math">
$ repeat \, until \, convergence\,\{ \\ \,\,\,\,\,\,\,\,\,\,\,\, \Theta_{j} := \Theta_{j} - \alpha \frac{\partial }{\partial \Theta_{j}} \,\, J(\Theta_{0}, \Theta_{1}) \\ \} \,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\, $
</div>
<p><br /></p>

<p><em><strong>Make sure that this will run for j = 0 and j = 1.</strong></em></p>

<p>But, pay attention, this is the generic version, the \( \Theta_{j} \) represent both \( \Theta_{0} \) and \( \Theta_{1} \).</p>

<p>What the algorithm is saying is that we’ll be doing this procedure to \( \Theta_{0} \) and \( \Theta_{1} \) at the same time! So, we can put it in this way:</p>

<div id="math">
$ repeat \, until \, convergence\,\{ \\ \Theta_{0} := \Theta_{0} - \alpha \frac{\partial }{\partial \Theta_{0}} \,\, J(\Theta_{0}, \Theta_{1}) \\ \Theta_{1} := \Theta_{1} - \alpha \frac{\partial }{\partial \Theta_{1}} \,\, J(\Theta_{0}, \Theta_{1}) \\ \} \,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\ $
</div>
<p><br /></p>

<p>Also, we can expand the <strong>Cost Function</strong> that is being derived, doing this, it will be exactly what I’ll be putting into code soon, so, our <strong>final algorithm</strong> is:</p>

<div id="math">
$ repeat \, until \, convergence\,\{ \\ \Theta_{0} := \Theta_{0} - \alpha \frac{\partial }{\partial \Theta_{0}} \,\, \Big (\frac{1}{2m} \sum_{i=1}^{m} (h_{\Theta}(x^{(i)}) - y^{(i)})^2 \Big) \\ \Theta_{1} := \Theta_{1} - \alpha \frac{\partial }{\partial \Theta_{1}} \,\, \Big (\frac{1}{2m} \sum_{i=1}^{m} (h_{\Theta}(x^{(i)}) - y^{(i)})^2 \Big) \\ \}
\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\ $
</div>
<p><br /></p>

<p><strong>Now it’s time to code all of it!</strong></p>

<p>First things first, we’ll be using <a href="http://code.google.com/p/jmathplot/">Google’s JMathPlot</a> to plot graphs using Java and Swing to use its JFrame, we shall start with our class to represent our <strong>Initial Data</strong>, which will be the <strong>Training Set</strong>.</p>
<pre>
<code class="java hljs">
    import javax.swing.JFrame;
    import org.math.plot.*;

    public class InitialData{
            public static double[] x = {2, 4, 6, 8};
            public static double[] y = {2, 5, 5, 8};

            public void plotData(){
                    Plot2DPanel plot = new Plot2DPanel();
                    plot.addScatterPlot("X-Y", this.x, this.y);
                    JFrame frame = new JFrame("Original X-Y Data");
                    frame.setContentPane(plot);
                    frame.setSize(600, 600);
                    frame.setVisible(true);
            }
    }
</code>
</pre>

<p><br />
To try out the data plotting, create a main class and call <em>plotData()</em> from <strong>InitialData.java</strong>, so we can have this:</p>

<p><img src="/content/images/2015/06/example-plot.png" alt="" /></p>

<p>Now we’re going to take our first steps on writing the <strong>GradientDescent.java</strong>, we must be very careful here. Let’s start with the main settings and parameters of it:</p>

<pre>
<code class="java hljs">
    import javax.swing.JFrame;
    import org.math.plot.*;

    public class GradientDescent{
            private double theta0;
            private double theta1;

            private int trendline;

            // Algorithm settings
        double alpha = 0.01;  // learning rate
        double tol = 1e-11;   // tolerance to determine convergence
        int maxiter = 9000;   // maximum number of iterations in case convergence is not reached
        int dispiter = 100;   // interval for displaying results during iterations
        int iters = 0;

        //track of results
        double[] theta0plot = new double[maxiter+1];
        double[] theta1plot = new double[maxiter+1];
        double[] tplot = new double[maxiter+1];

        InitialData initial_data;

        Plot2DPanel plot;

        public GradientDescent(InitialData id){
                    //initial guesses
            this.theta0 = 0;
            this.theta1 = 0;
            this.initial_data = id;

            plot = new Plot2DPanel();
            plot.addScatterPlot("X-Y", initial_data.x, initial_data.y);
            JFrame frame = new JFrame("Final X-Y Data");
            frame.setContentPane(plot);
            frame.setSize(600, 600);
            frame.setVisible(true);
        }
    [...]
</code>
</pre>

<p>Now let me explain a few details of this part:</p>

<p><strong>Alpha</strong> is the <strong>Learning Rate</strong>, it’s a <em>dangerous variable</em>, it’s used to set the size of the step that the algorithm will take while trying to find the \( \Theta_{0} \) and \( \Theta_{1} \), that’s the learning rate of the algorithm. If Alpha is <strong>too low</strong>, the algorithm can be very slow, although very precise, if Alpha is <strong>higher</strong>, it will be taking <strong>larger steps</strong>, which can be <strong>faster</strong>, or <strong>dangerous</strong>, causing the algorithm to <strong>DIVERGE</strong>, which, <em>trust me</em>, you don’t want this! <em>(Andrew Ng explain this part very well in its course)</em></p>

<p>The variable <strong>TrendLine</strong> is what we’ll use to plot the straight line which is our main goal.</p>

<p>The <strong>tol</strong> variable is our safe move in case of a dangerous convergence, which means, in case of convergence, it will stop the execution.</p>

<p>The other variables and objects in this part are very intuitive to understand, it’s auto explainable! <em>(forgive if i’m wrong, just say something and I’ll put more detail on that)</em>.</p>

<p>About the Constructor, we’re saying that our initial guesses for \( \Theta_{0} \) and \( \Theta_{1} \) is 0. The rest is just data plotting.</p>

<p><strong>next: our Hypothesis Function</strong> <em>(that will be doing exactly as the model that I did show above)</em></p>
<pre>
<code class="java hljs">
    public double hypothesisFunction(double x){
            return this.theta1*x + theta0;
        }
</code>
</pre>

<p>Now, our two function to derive our \( \Theta \), again, it will be doing exactly the same as the mathematical model, there’s no magic!</p>

<pre>
<code class="java hljs">
    public double deriveTheta1(){
            double sum = 0;

            for (int j=0; j&lt;initial_data.x.length; j++){
                    sum += (initial_data.y[j] - hypothesisFunction(initial_data.x[j])) * initial_data.x[j];
            }
            return -2 * sum / initial_data.x.length;
        }

        public double deriveTheta0(){
            double sum = 0;

            for (int j=0; j&lt;initial_data.x.length; j++) {
                    sum += initial_data.y[j] - hypothesisFunction(initial_data.x[j]);
            }
            return -2 * sum / initial_data.x.length;

        }
</code>
</pre>

<p><br />
Now, the <strong>Gradient Descent Algorithm</strong> <em>per se</em>, making use of the functions above:</p>

<pre>
<code class="java hljs">
    public void execute(){
            do {

                    this.theta1 -= alpha * deriveTheta1();
                    this.theta0 -= alpha * deriveTheta0();

                    //used for plotting
                    tplot[iters] = iters;
                    theta0plot[iters] = theta0;
                    theta1plot[iters] = theta1;
                    iters++;

                    if (iters % dispiter == 0){
                            addTrendLine(plot, true);

                    }

                    if (iters &gt; maxiter) break;
            } while (Math.abs(theta1) &gt; tol || Math.abs(theta0) &gt; tol);
            plot.addScatterPlot("X-Y", initial_data.x, initial_data.y);
            System.out.println("theta0 = " + this.theta0 + " and theta1 = " + this.theta1);
        }
</code>
</pre>

<p>Note that it does <em>almost</em> exactly the same as the mathematical model of the Gradient Descent demonstrated above, the difference is only a few details, such as the <em>if</em> and <em>while</em> to verify convergence or divergence <em>(which is, if it reached the iteration’s limit)</em></p>

<p>Next we have the <strong>addTrendLine</strong> function, used to keep plotting our straight line as it will become more updated.</p>

<pre>
<code class="java hljs">
    public void addTrendLine(Plot2DPanel plot, boolean removePrev){
            if (removePrev){
                    plot.removePlot(trendline);
            }
            double[] yEnd = new double[initial_data.x.length];
            for (int i=0; i&lt;initial_data.x.length; i++)
                    yEnd[i] = hypothesisFunction(initial_data.x[i]);
            trendline = plot.addLinePlot("final", initial_data.x, yEnd);
        }
</code>
</pre>

<p>And now we have an extra, it’s a function to store and plot the convergence history of both \( \Theta_{0} \) and \( \Theta_{1} \), so we can see how it happened.</p>

<pre>
<code class="java hljs">
    public void printConvergence(){

          double[] theta0plot2 = new double[iters];
          double[] theta1plot2 = new double[iters];
          double[] tplot2 = new double[iters];
          System.arraycopy(theta0plot, 0, theta0plot2, 0, iters);
          System.arraycopy(theta1plot, 0, theta1plot2, 0, iters);
          System.arraycopy(tplot, 0, tplot2, 0, iters);

          // Plot the convergence of data
          Plot2DPanel convPlot = new Plot2DPanel();

          // add a line plot to the PlotPanel
          convPlot.addLinePlot("theta0", tplot2, theta0plot2);
          convPlot.addLinePlot("theta1", tplot2, theta1plot2);

          // put the PlotPanel in a JFrame, as a JPanel
          JFrame frame2 = new JFrame("Convergence of parameters over time");
          frame2.setContentPane(convPlot);
          frame2.setSize(600, 600);
          frame2.setVisible(true);
        }
</code>
</pre>

<p>Finally, we have our <strong>Test Class</strong>, that will execute everything:</p>

<pre>
<code class="java hljs">
    import javax.swing.JFrame;

    import org.math.plot.*;

    public class TestGradDescent {
            public static void main(String[] args ){
                    InitialData id = new InitialData();
                    id.plotData();
                    GradientDescent gd = new GradientDescent(id);
                    gd.execute();
                    gd.printConvergence();

            }
    }
</code>
</pre>

<p>Now, executing the code, the output will be, at first, the initial data:</p>

<p><img src="/content/images/2015/06/example-plot-2.png" alt="" /></p>

<p><strong>Executing the algorithm, it learns and generate its prediction based on its initial data:</strong></p>

<p><img src="/content/images/2015/06/example-plot-line-e1420763780646.png" alt="" /></p>

<h2 id="magical-right">Magical, right?</h2>

<p>And then, we can see the <strong>convergence</strong>:</p>

<p><img src="/content/images/2015/06/example-convergence.png" alt="" /></p>

<p>And you can see in the terminal the final values of \( \Theta_{0} \) and \( \Theta_{1} \) that minimized the Cost Function.</p>

<p><em>If it wasn’t Science, probably would be black magic. heh.</em></p>

<h2 id="a-few-considerations">A few considerations</h2>

<p>You can download the complete code <a href="https://github.com/digorithm/ArtificialIntelligenceAlgorithms">here</a>.</p>

<p>If you have any questions/suggestion, drop me an email so we can talk!</p>

<p>If you need further details of the mathematical model, I ultra advice to watch Andrew’s Ng Videos at Stanford@Coursera. <strong>His skills to teach it is something unbelievable awesome</strong>.</p>

<p><em>Thanks for reading!</em></p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        6 JAN 2015
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/learn-design-patterns" class="post-title" title="Why, how and where to Learn Design Patterns">Why, how and where to Learn Design Patterns</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>The first thought I had when I started to study <a href="http://en.wikipedia.org/wiki/Software_design_pattern">Design Patterns</a> was:</p>

<blockquote>
  <p><em>- “damn, is all this really necessary?”</em></p>
</blockquote>

<p>I mean, so many patterns, so many details to do things that look simple to do without any further detailed thoughts. And I started to question myself if this was really a productive thing. The first answer I gave was:</p>

<blockquote>
  <p><em>-”no, *wonderful not-bad-word* this, I’m losing too much time trying to wrap my head around this”</em></p>
</blockquote>

<p>So I forgot it and kept developing my software using something like <a href="https://gist.github.com/banaslee/4147370#file-xgh-en-txt">Extreme Go Horse</a>. (i was younger at that time). Then, I saw a pattern being formed:</p>

<p>###Every time I came back to my old codes I couldn’t extend nor debbug it in a easy way. It was always extremely hard to work on it.</p>

<p>And then I realized why: <strong>lack of good architectural decisions.</strong></p>

<p>So I decided to give another chance to learning Design Patterns and finally I understood its beauty.</p>

<h2 id="few-things-to-keep-in-mind">Few things to keep in mind:</h2>

<p>1. It’s not about trying to fit every problem in every Design Pattern. That’s just a waste of time</p>

<p>2. It may be not very productive at start, the process of applying a DP in a determined problem takes time.</p>

<p>3. On the other hand, it will be extremely productive when you try to debug your code or try to extend it. Everything starts to make more sense and it’s way easier to change things when you’ve followed some patterns</p>

<p>4. When studying a Design Pattern, try hard to implement that solution in a problem. This will make total difference</p>

<h2 id="now-to-the-materials">Now, to the materials!</h2>

<p>Start with the classics:</p>

<h4 id="design-patterns-aka-gang-of-four"><a href="http://www.amazon.com/Design-Patterns-Object-Oriented-Professional-Computing/dp/0201634988">Design Patterns</a> (a.k.a Gang of Four)</h4>

<p>This is the all times classic. These four gentlemen were the firsts to formalized and compile all patterns found on Object Oriented Systems. Here my advice is to go one by one, pick a pattern, read it, understand it, implement it and ,finally, really understand it.</p>

<p> </p>

<h4 id="head-first-design-patterns"><a href="http://www.amazon.com/Head-First-Design-Patterns-Freeman/dp/0596007124">Head First Design Patterns</a></h4>

<p>This one I’ve used when I didn’t understand a concept from the Gang of Four, it is easier to grasp the concepts, the approach is way less hardcore than the original GoF, but it still is a great book.</p>

<h3 id="code-samples">Code Samples</h3>

<p>That said, it’s always good to have examples of each Design Pattern by your side, so you can study the DP and check other examples, so real world examples are perfect for it:</p>

<p><a href="http://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns/2707195#2707195">List with Examples of Patterns implemented in the Java SE and EE API</a></p>

<p><a href="http://www.dofactory.com/net/design-patterns">List with Examples of patterns demonstrated with C#</a></p>

<p><a href="http://sourcemaking.com/design_patterns">Excellent examples and explanations of each Design Pattern</a></p>

<p><a href="http://c2.com/cgi/wiki?PeopleProjectsAndPatterns">Another great material on Design Patterns, with lots of great thoughts on it</a></p>

<p>I believe this is a good start to learn Design Pattern and I hope this helps someone, mainly if they’re struggling with the same doubts I had when trying to learn it.</p>

<p>Oh, one more thing: <strong>Do not ever go Extreme Go Horse, really.</strong></p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        31 OCT 2014
      </span>
      
      •
      
        <a class="post-cat" href="/categories/#general">general</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#setup">setup</a>
        
        <span>/</span>
        
      
        <a class="post-cat" href="/categories/#demo">demo</a>
        
      
      
    </p>
    <h4>
      <a href="/post/thoughts-on-automata-theory" class="post-title" title="Thoughts on Automata Theory">Thoughts on Automata Theory</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>I’ve been reading many texts on automata theory these times, and let me tell you, that’s such a wonderful thing. It pretty much explain how computers can…. compute! Simply put, Automata Theory deals with the logic of computation with respect to simple machines, referred to as Automata.</p>

<p>From the mathematical models to represent it to the fun programming implementations, it’s really great and exciting to study it!</p>

<p>Automatons are abstract models of machines that perform computations on an input by moving through a series of states or configurations. At each state of the computation, a transition function determines the next configuration on the basis of a finite portion of the present configuration. As a result, once the computation reaches an accepting configuration, it accepts that input. The most general and powerful automata is the <a href="http://en.wikipedia.org/wiki/Turing_machine">Turing machine</a>.</p>

<p>In layman’s terms, FSM <em>(Finite State Machine)</em> or Automaton is a device <em>(hardware or software)</em> that responds to external events and produces actions. The actions generated depend on the past history of the system, i.e. its state.</p>

<p>This can go from a simple reserved word analyzer</p>

<p><img src="/content/images/2015/06/thenautomata2.png" alt="" /></p>

<p>To big Regular Expressions:</p>

<p><img src="/content/images/2015/06/bigdfa.jpg" alt="" /></p>

<p>Automatons are also essentials to understand the <strong>limits of the computation</strong>, thus, we have now two important problems coming out from this thought:</p>

<p>1. What computers can do?</p>

<p>2. What computers can do efficiently?</p>

<p>The first one is called <a href="http://courses.cs.washington.edu/courses/cse322/08sp/lec20.pdf">Decidability</a> and the second one is called <a href="http://en.wikipedia.org/wiki/Computers_and_Intractability">intractability</a></p>

<p>And it brings our minds to the very beginning of the Computing Science, where many scientist were thinking about the limits of computation, not that today there aren’t many scientists working on it, but today many programmers, sadly, ignore this kind of knowledge.</p>

<p>But, returning to our automatons, they’re represented by a bunch of states that we represent formally as \( Q \), a finite set of symbols ( \( \sum \) ), a transition function ( \( \delta \) ) that has two parameters: a state \( Q \) and a symbol, this function is responsible for the change of states in the automaton. An initial State from \( Q \) and a acceptance state also from \( Q \).</p>

<p>So we can say that a generic automaton can be represented formally as</p>

<script type="math/tex; mode=display">A = \left ( Q, \sum, \delta, q0, F \right )</script>

<p>The automatons fall into two classifications, they can be:</p>

<h2 id="deterministic">Deterministic</h2>

<p>Where they can’t be at more than one state at the same time, it’s the real world way to represent abstracts machines, because this kind of automaton has no ambiguity . Here’s a simple example of an DFA <em>(Deterministic Finite Automaton)</em> that only accepts string having 001 as substring.</p>

<p><img src="/content/images/2015/06/dfaex1.png" alt="" /></p>

<p>Informally speaking, if you put a string of 0s and 1s such as 10011 and process it number by number, following the states changes you will see that it will end the processing and your current state will be the acceptance state, so, this string is acceptable! So a string such as 11101010, if you try the same process, won’t end at an acceptable state, so we say that this string is not acceptable by this automaton.</p>

<h2 id="non-deterministic">Non Deterministic</h2>

<p>In this case, the automaton can change to multiple states at the same time, which means, it’s not so deterministic and precise as the deterministic automaton. So why one would use this non deterministic automaton? Simply put, it’s way easier to design a NFA (Non deterministic Finite Automaton) to solve a determined problem than to design a precise DFA to solve this same problem.</p>

<p><strong>But! We’ve a problem here!</strong></p>

<p><em>How can a computer, which is an unambiguous machine, process something that is not deterministic?</em></p>

<p><strong>It can’t. And it won’t!</strong></p>

<p><img src="/content/images/2015/06/pergunta.jpg" alt="" /></p>

<p><em>So why in the seven hells would i want to use this NFA if the machine can’t understand?</em></p>

<p>The answer is, every NFA has an equivalent DFA, which means, if a language is recognized by the NFA and by the DFA, they’re equivalent. All you have to do is <a href="http://web.cecs.pdx.edu/~harry/compilers/slides/LexicalPart3.pdf">translate</a> the NFA into a DFA so the machine can use it!</p>

<h3 id="talking-about-language-what-is-it-in-this-context">Talking about Language, what is it in this context?</h3>

<p>Well, this is what we call <strong>Regular Language</strong> which is a Language L accepted by an Automaton, <strong>so the language of an Automaton is the set of all string that it accepts.</strong></p>

<p>We can define the language of a DFA as</p>

<script type="math/tex; mode=display">L(A) = \{ \omega \,|\, \delta(q0, \omega)\, is\, in\, F \}</script>

<p>Which means, an Automaton processing a string, from its initial state, being computed by its transition function, if the processing ends in the acceptance state, this means that this is the language of this DFA.</p>

<h2 id="conclusion-next-steps-and-further-readings">Conclusion, next steps and further readings</h2>

<p>As you may have noticed, there are unimaginable ways to use Automatons, it wasn’t even created to apply directly in the Computer Science, two neurophysiologists, were the first to present a description of finite Automata in 1943. Their paper, entitled, “A Logical Calculus Immanent in Nervous Activity”, had a huge impact in the computer science.</p>

<p>For anyone who’s trying to dive deeper in this field, I strongly advice the <a href="http://www.amazon.com/Introduction-Automata-Languages-Computation-Edition/dp/0321455363">Ullman’s book on Automata and Complexity Theory</a></p>

<p>And soon I pretend to write few more thing on Automata, such as techniques to translate a NFA to a DFA using the algorithm of subset construction.</p>

<p>For now my main goal was to simply introduce this beautiful branch of the Computer Science and Mathematics and show its applications.</p>

<p>If something isn’t clear to you, drop me an email and let’s talk about it! :)</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        10 OCT 2014
      </span>
      
    </p>
    <h4>
      <a href="/post/fun-with-graphs-pt1" class="post-title" title="Fun with graphs pt1">Fun with graphs pt1</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>Graph Theory is definitely one of my favorite branches of the Mathematics &amp; Computer Science, mostly because of its nearest infinity applications, in both real world problems and pure theoretical problems.</p>

<p>These days I’ve been working (with my buddy Daniel Almeida) in a framework to create and manipulate graphs. Which means, creating a data structure to represent graphs, edges, vertexes and creating algorithms to work on this structure. All this is being made with Java and I’ll expose this code here, as I saw a terrible lack of good readable codes about it on the internet.</p>

<p>So, before we start coding the graph’s structure… we must clarify what a graph is and why it’s so important to the Computer Science (and many other sciences).</p>

<p>A graph is a ordered pair (G = (V,E)) , where (V) is a set of Vertices/Nodes and (E) is a set of Edges, an extremely mple example of a complete <a href="http://mathworld.wolfram.com/SimpleGraph.html">simple</a>, <a href="http://mathworld.wolfram.com/ConnectedGraph.html">connected</a> and <a href="http://mathworld.wolfram.com/CompleteGraph.html">complete</a> graph is:</p>

<p><img src="/content/images/2015/06/graph1.png" alt="alt" /></p>

<p><em>So, what’s the huge deal with this graph theory thing?</em></p>

<p>Well, not only theoretical computer science problems lay on the graph theory but also in many other distinct fields, from particle physics, chemistry to <a href="http://en.wikipedia.org/wiki/Mathematical_sociology">sociology</a>.</p>

<p>All this because every little thing in our universe is linked, and when this set of things became a “web of things”, we need to study its properties. And that’s where graph theory get in.</p>

<p>So when a graph gets bigger, we need to represent this structure in a computational way, so we can compute things like shortest path between two nodes, connectivity and thousand of other properties and techniques.</p>

<p>The most common ways to represent graph mathematically are:</p>

<h2 id="adjacency-matrix">Adjacency Matrix</h2>

<p>It’s a matrix that represent the adjacency of every node in a graph, it’s an excellent way to work computationally with graphs. The same graph that I presented previously in a visual way can be represented by the following adjacency matrix:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{bmatrix}
0 & 1 & 1 \\\ 
1 & 0 & 1 \\\ 
1 & 1 & 0
\end{bmatrix} %]]></script>

<h2 id="adjacency-list">Adjacency List</h2>

<p>This is another common way to represent graph mathematically, it’s a simple list of lists, each node in the main list points to a list of their adjacent nodes.</p>

<p>Here’s an example:</p>

<p><img src="/content/images/2015/06/graph2.png" alt="" /></p>

<p><img src="/content/images/2015/06/adjaceny-list.gif" alt="" /></p>

<h2 id="data-structures-to-represent-graphs">Data Structures to represent Graphs</h2>

<p>Ok, so, how do we represent graphs, edges and vertexes in terms of data structures? Before we dig deeper in the algorithms and the mathematical properties of the graphs, we need to create our Data Structure to work with.</p>

<h3 id="the-vertex">The vertex</h3>
<pre>
<code class="java hljs">
package GraphModels;

public class Vertex {
    /* This Data Structure will be capable to represent a Vertex,
    * which is a Node that will be used on a graph
    */
    
    public String id;
    public String name;
    public boolean visited = false;
    
    public Vertex(String id, String name) {
        this.id = id;
        this.name = name;
    }
    public String getId() {
        return id;
    }
    
    public String getName() {
        return name;
    }
    
  @Override
  public String toString() {
    return name;
  }
    
}

</code>
</pre>

<p>For now you may be asking yourself why do we need a variable called “Visited”. Well, we’ll be using it in algorithms to walk through the graph, so we must need to know which nodes were visited. It will became more clear soon!</p>

<h3 id="the-edge">The Edge</h3>

<p>Yes, the edge must be represented computationally! That’s our way to figure out paths through the vertexes, the edge may or may not have a weight, the edge must know its source vertex and its destination vertex</p>
<pre>
<code class="java hljs">
    package GraphModels;

    public class Edge {

         /* This Data Structure will be capable to represent a Edge,
        *    that will be used on a graph
        */

        public String id;
        public Vertex source;
        public Vertex destination;
        private final int weight;

        public Edge(String id, Vertex source, Vertex destination, int weight) {
            this.id = id;
            this.source = source;
            this.destination = destination;
            this.weight = weight;
        }

        public String getId() {
            return id;
        }
        public Vertex getDestination() {
            return destination;
        }

        public Vertex getSource() {
            return source;
        }
        public int getWeight() {
            return weight;
        }

        @Override
        public String toString() {
            return source + " " + destination;
        }
    } 
</code>
</pre>

<h3 id="the-graph">The Graph</h3>

<p>That’s for sure the biggest and most complex part, don’t panic with the many algorithms already implemented in this code. I’ll be explaining one by one.</p>

<p>We’re reading a text file containing the text file, if you want to test by yourself, make sure to create a .txt in the correct way and to pass the correct file path! You can find the instructions to write the .txt graph in the comments of this code</p>

<pre>
<code class="java hljs">
    package GraphModels;

    import java.io.BufferedReader;
    import java.io.FileNotFoundException;
    import java.io.FileReader;
    import java.io.IOException;
    import java.util.ArrayList;
    import java.util.HashMap;
    import java.util.LinkedList;
    import java.util.List;
    import java.util.Map;
    import java.util.Queue;

    public class Graph {

        /* This Data Structure will be capable to represent a Graph,
        *   where G = (V, E)
        */

       private  List nodes;
       private  List edges;
       public Vertex node;
       public Edge edge;
       private String path;
       private int [][] adjacencyMatrix;
       private Map nodesMatrixMap;
       private List adjacentNodes;
       public int degree;
       public int minDegree;
       public int maxDegree;
       public int avgDegree;

       public Graph() {

      }

      public List getNodes() {
        return nodes;
      }

      public List getEdges() {
        return edges;
      }

      public void setNodes(List vertex){
          this.nodes = vertex;
      }

      public void setEdges(List edges){
          this.edges = edges;
      }

      // Find an edge
      // TO-DO: Change == to equals
      public Edge getEdge(Vertex source, Vertex destination) {
          for (Edge edge : this.getEdges()) {
              if ((edge.getSource().getId() == source.getId() &amp;&amp; edge.getDestination().getId() == destination.getId()) || (edge.getSource().getId() == destination.getId() &amp;&amp; edge.getDestination().getId() == source.getId())) {
                  return edge;
              }
          }
          return null;
      }

      // Check if there is an edge for two given vertices
      public boolean hasEdge(Vertex source, Vertex destination) {
          Edge result = this.getEdge(source, destination);
          if (result != null) {
            return true;
          } else {
            return false;
          }
      }

      public List getAdjacentNodes(Vertex node){
          adjacentNodes = new ArrayList();

          for (Vertex currentNode : nodes){
              if (hasEdge(node, currentNode)){
                  adjacentNodes.add(currentNode);
              }
          }

          return adjacentNodes;
      }

      public int getMinDegree(){
          minDegree = 99999999;

          for (Vertex node : nodes){
              if (this.getDegree(node)maxDegree){
                  maxDegree = this.getDegree(node);
              }
          }

          return maxDegree;
      }
      public int getAvgDegree(){
          avgDegree = 0;

          for (Vertex node : nodes){
              avgDegree += this.getDegree(node);
          }
          avgDegree = avgDegree/nodes.size();

          return avgDegree;
      }

      //modified for our needs   
      public int breadthFirstSearch(Vertex rootNode){

          int visitedNodes = 0;
          Queue q = new LinkedList();
          q.add(rootNode);

          while (!q.isEmpty()){
              Vertex currentNode = (Vertex) q.peek();
              for (Vertex node : this.getAdjacentNodes(currentNode)){
                  if (!node.visited){   
                      node.visited = true;
                      q.add(node);
                      visitedNodes++;
                  }
              }
              q.remove();   
          }
          //reseting all flags
          for (Vertex node : nodes){
              node.visited = false;
          }

          return visitedNodes;

      }

      public boolean isConnected(){
          int numberOfNodes = nodes.size();

          for (Vertex node : nodes){
              if (!(this.breadthFirstSearch(node) == numberOfNodes)){
                  return false;
              }
          }
          return true;
      }

      //TO-DO: error treatment. 
      // while this treatment doesn't exist: BE EXTREMELY CAREFUL WITH GRAPH.TXT
      // the right syntax is:
      //line (1) :1,2,...,n 
      //line (2) :1-2
      //line (3) : weight of the previous connection
      //line (n) :2-n
      //line (n+1) : weight of the previous connection
      //line (n+2) :-1
      //where the first line you must declare the nodes, each one separated by comma
      //the second til the n-th line you must declare the connections between the nodes declared 
      //in the first line
      //after every connection, in the next line, you must declare the weight of the connection
      // leave everything zero to create a unweighted graph
      //after the last connection, you must end with a -1
      // if you don't do this your computer may explode lol
      //...
      //...
      //...
      // i don't know, i did never try that.
      public void createGraph(String path) throws FileNotFoundException, IOException{
          this.path = path;

          nodes = new ArrayList();
          edges = new ArrayList();

          FileReader fr = new FileReader(path);
          BufferedReader textReader = new BufferedReader(fr);

          //gets the first line, which are the nodes that must be created
          String TextData = textReader.readLine();

          //separate the string with numbers
          String[] nodesInString = TextData.split("\\s*,\\s*");

          //create the list of nodes
          for (String nodeInString : nodesInString){

              node = new Vertex(nodeInString, "node " + nodeInString);
              nodes.add(node);

          }

          //create the list of edges
          String edgeIntoString;
          Vertex vertex_aux1 = new Vertex("-1","-1");
          Vertex vertex_aux2 = new Vertex("-1","-1");;
          int n = 0;
          //varre a linha que tem x-y
          while (!(edgeIntoString = textReader.readLine()).equals("-1")){

              String[] nodesConnected = edgeIntoString.split("\\s*-\\s*");
              //varre os dois nodes

              int peso = Integer.parseInt(textReader.readLine());

                  //verifica se x e y passados no txt estão instanciados em nodes 
                  for (Vertex node : nodes){

                      if (nodesConnected[0].equals(node.getId())){
                          //se o node do txt foi achado em nodes

                          vertex_aux1 = new Vertex(node.getId(), node.getName());
                      }
                  }
                  for (Vertex node : nodes){

                      if (nodesConnected[1].equals(node.getId())){

                          vertex_aux2 = new Vertex(node.getId(), node.getName());
                      }
                  }

              edge = new Edge(Integer.toString(n),vertex_aux1, vertex_aux2, peso);
              edges.add(edge);
          }

      }
      // Add a new edge
      public boolean addEdge(Vertex source, Vertex destination) {
          Edge newEdge = new Edge("id", source, destination, 0);
          return this.edges.add(newEdge);
      }

      // Remove an edge
      public boolean removeEdge(Vertex source, Vertex destination) {

          Edge result = this.getEdge(source, destination);

          if (result != null) {
              return this.edges.remove(result);
          } else {
              System.out.println("Couldn't find edge");
              return false;
          }
      }

      public int getDegree(Vertex node){

          degree = 0;

          for (Vertex CurrentNode : nodes){
              if (hasEdge(node, CurrentNode)){
                  degree++;
              }
          }

          return degree;
      }

      public void printGraph() {

          for (Vertex node: this.getNodes()){
              System.out.println(node.getName());
              System.out.print("Adjacent nodes: ");
              adjacentNodes = getAdjacentNodes(node);
              for (Vertex adjacentNode : adjacentNodes){
                  System.out.print(adjacentNode.getName() + " ");
              }

              System.out.println(" ");
              System.out.println("Degree of this node: " + getDegree(node));
              System.out.println(" "); 
          }
          System.out.println("- - - - - - - - - - - - - - - - ");
          System.out.println(" ");
          System.out.println("Min Degree of this Graph: " + getMinDegree());
          System.out.println(" ");
          System.out.println("Max Degree of this Graph: " + getMaxDegree());
          System.out.println(" ");
          System.out.println("Average Degree of this Graph: " + getAvgDegree());
          System.out.println(" ");
          System.out.println("Graph is connected: " + this.isConnected());
          System.out.println(" ");
          System.out.println("- - - - - - - - - - - - - - - - ");
          System.out.println("Connections: ");
          System.out.println(" ");
          for (Edge edge : this.getEdges() ){
              System.out.print(edge.getSource().getId() +"&lt;-&gt;"+edge.getDestination().getId()+" ");
              System.out.println("weight: " + edge.getWeight());
          }
          System.out.println(" ");
          System.out.println("- - - - - - - - - - - - - - - - ");
        }

      public void setAdjacencyMatrix() {

        initializeAdjacencyMatrix();
        int weigth;
        int source;
        int destination;
        for (Edge currentEdge : this.getEdges() ){
            weigth = currentEdge.getWeight();
            source = (int) nodesMatrixMap.get(currentEdge.getSource().getName());
            destination = (int) nodesMatrixMap.get(currentEdge.getDestination().getName());

            adjacencyMatrix[source][destination] = weigth; 
            //must be symmetric
            adjacencyMatrix[destination][source] = weigth; 
        }
      }

      public void initializeAdjacencyMatrix(){
          int numNodes = this.nodes.size();
          adjacencyMatrix = new int[numNodes][numNodes];
          nodesMatrixMap = new HashMap();
          for (int i = 0; i &lt; numNodes; i++) {
              nodesMatrixMap.put(this.nodes.get(i).getName(), i);
              for (int j = 0; j &lt; numNodes; j++) {
                  adjacencyMatrix[i][j] = -1;
              }
          }
      }

      public void printAdjacencyMatrix() {

          String sourceName;
          String destName;
          int source;
          int dest;

          System.out.println(" ");
          System.out.println("Adjacency Matrix: ");
          System.out.println(" ");

          for (int i = 0; i &lt; this.nodes.size(); i++) {
              sourceName = this.nodes.get(i).getName();
              source = (int) nodesMatrixMap.get(sourceName);
              for (int j = 0; j &lt; this.nodes.size(); j++) {
                  destName = this.nodes.get(j).getName();
                  dest = (int) nodesMatrixMap.get(destName);
                  if (adjacencyMatrix[source][dest] == -1) {
                      System.out.print("- ");
                  } else {
                      System.out.print(adjacencyMatrix[source][dest] + " ");
                  }
              }
              System.out.print("\n");
          }
      }

    }
</code>
</pre>

<h3 id="the-test-file">The test file</h3>

<p>Here’s the file containing the main, if you want to test, remember to change the path file!</p>

<pre>
<code class="java hljs">
    package graphproject;
    import GraphModels.*;
    import java.io.IOException;
    import java.util.ArrayList;
    import java.util.List;

    public class GraphProject {

        //graph creation procedure
        private List nodes;
        private List edges;
        private Graph graph;
        public Vertex node;
        public Edge edge;

        public void printGraph(Graph graph) {
          for (Vertex node: graph.getNodes()){
                 System.out.println(node.toString());
          }

          for (Edge edge : graph.getEdges() ){
                 System.out.println(edge.toString());
                 System.out.println(" ");
          }

        }

        public void test() throws IOException{

            Graph graph = new Graph();
            graph.createGraph("/Users/daniel/Documents/workspace_java/GraphProject/src/graphproject/graph.txt");

            graph.printGraph();
            graph.setAdjacencyMatrix();
            graph.printAdjacencyMatrix();
        }
        //end of graph creation procedure

        public static void main(String[] args) throws IOException {
           GraphProject gp = new GraphProject();

           gp.test();
        }
    }
</code>
</pre>

<h2 id="conclusion-and-next-steps">Conclusion and next steps</h2>

<p>At this moment, you’re perfectly able to create a graph (via .txt file) and run all those algorithms to extract information about your graph. Just make sure to import the right libraries and to put the files in the right package. Doing these little things right, I’m pretty sure this will work perfectly.</p>

<p>But I’m sure you may be a little lost about a few algorithms and techniques we’ve implemented in the Graph.java. But, don’t worry, i’ll be explaining each method one by one in the next parts of this post!</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        22 JUL 2014
      </span>
      
    </p>
    <h4>
      <a href="/post/crud-with-java-jsp" class="post-title" title="CRUD with Java, JSP and MySQL">CRUD with Java, JSP and MySQL</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>One of the most common kind of applications in today's tech/business world is the CRUD system, that is the idea of the user interacting with a database, so the user can Create, Retrieve, Update and Delete <em>(yep, that awful name came from this)</em> data from this database. Also, <strong>learning how to create a CRUD with a language is a great way to understand the basics of this language, the basics of software design, engineering and architecture.</strong> In layman's term, a CRUD page is just a page where you can insert a thing, edit that thing, search that thing and delete that thing, just that!</p>
<p> </p>
<h3>Our goal</h3>
<p>Well, our scenario will be the simplest possible, so we can understand how to communicate with our database, so, it will be a simple contact book web app where we can do our CRUD with persons. This person will have 

</p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        16 JUL 2014
      </span>
      
    </p>
    <h4>
      <a href="/post/object-oriented-thinking" class="post-title" title="Object Oriented Thinking">Object Oriented Thinking</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>###What are the main goals of the object-oriented programming?###</p>

<p><em>1. Abstraction, yes, i had to put this in the first place, in my point of view, this is the biggest goal of the OO programming</em></p>

<p>2. Encapsulation, which is a form of abstraction!</p>

<p>3. Reusability</p>

<p>4. Modularity</p>

<p>5. Readability</p>

<p>Let’s say that OO programming did <strong>never</strong> exist, so, i can say that any procedural programmer <em>(C, fortran, cobol, etc..)</em> who has a little notion about how to build organized codes, would, naturally, evolve to an organization that would look like the actual concept of OO programming.</p>

<p>Don’t you think? It would be intuitive, the object-oriented thinking is a quite natural way to think, let me show you… We are used to separate <em>things</em> (from now we’ll call thing as objects) by it’s <em>class</em>, just like the class “Car”, we know GM, wolksvagem, nissan, honda…but they all are cars, right? And we’re also used to say that something <em>inherited</em> some particularities from his precedent… And that’s the idea behind the OO programming, grab the main concept of object and class that defines objects in <strong>real world</strong> and use it on programming!</p>

<p><img src="/content/images/2015/06/dog.gif" alt="" /></p>

<p>Just before the creation of Object-Oriented Programming, the system development in C was using the concept of breaking the big problem into small sub-problems, where each sub-result together would generate the solution of the big problem in question. It’s actually smart to think like this, the OOP languages just formalized this concept (and of course, create others features, but this was the start point). Look at this following problem: We want a data structure to represent the functionaries of determined business, this functionary should have a name, age, salary and a function to change his salary. Let’s deal with it in the smartest way, which is, creating separately some structure that will represent the functionaries, in C we would code something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>typedef struct functionary{
  int age;
  char name[50];
  float salary;
}stru_func, *ap_func;

void riseSalary(ap_func pthis){ 
      int n;
      printf("Enter new salary: \n");
      scanf("%d", n);
      pthis-&gt;salary = n;
  }
</code></pre>
</div>

<p>As you can see, in this func.c, we have the structure to represent the functionaries and the function that we will use. (from now, we’ll call function as METHODS)</p>

<p>And here’s the <strong>main code:</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include "func.c"
int main(){
  stru_func new;
  printf("Enter the age, name and salary: \n");
  scanf("%d", &amp;new.age);
  scanf("%s", &amp;new.name);
  scanf("%f", &amp;new.salary);
  printf ("%d \n", new.age);
  printf ("%s \n", new.name);
  printf ("%f \n", new.salary);
  riseSalary(&amp;new);
  printf("%f", new.salary);
  return 0;
}
</code></pre>
</div>

<p>Done, now we have a nice example of class and object…but, made with C! Where the class is this struct called “functionary” and the variables inside it we call “attributes” and the function “riseSalary” we call “method” (obs: look that the function/method is OUTSIDE the struct functionary), in fact we separate the module that represent the functionaries from the main module, and if we want, we can use this functionary module in other problems that need a struct to represent functionaries with those attributes/methods!</p>

<p>And…where’s the object? Right there in the main module, where we created a “variable” called “new” from the struct functionary, this is called “INSTANCE”, in this moment, we create a object from its class! Again, the class is the structure that represent the functionary and the object is the “variable” that we created with this structure!</p>

<p>All these concepts already happened before the creation of the pure Object-Oriented languages, but there was a need of formalize these techniques, creating more rigorous, useful and trustful standards.</p>

<p>The same problem that we solved in C, in java, would be something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>public class functionary
{
  public int age;
  public string name;
  public int salary;
  public void riseSalary(int n)
  {
      this.salary = n;
  }
}
</code></pre>
</div>

<p>As you should have noticed, the method now is INSIDE the structure that represent the functionary (the class). And what the big advantage of this? the class is now more portable, we can reuse it easily!</p>

<p>in the main module we could just create as many object as we want just using: <em>“functionary func = new functionary();”</em></p>

<p><strong>Conclusion</strong>: Of course that the big evolution of procedural to Object-Oriented did not stop there! The concept of reuse, organize and divide the code and the problem created others many famous techniques that we can use on classes and objects, like the <strong>polymorfism</strong>, inheritance, abstract class and many others! But this evolution kept one main goal: <strong>modularity with more abstraction.</strong></p>

      </p>
    </div>
    

    

</section>

<section class="post">
  <header class="post-header">
    <p class="post-meta">
      <span class="post-date">
        16 JUL 2014
      </span>
      
    </p>
    <h4>
      <a href="/post/a-romantic-vision-of-the-software-engineering" class="post-title" title="A Romantic Vision Of The Software Engineering">A Romantic Vision Of The Software Engineering</a>
      
    </h4>

    

    </header>

    
    <div class="post-description">
      <p>
        <p>Well, it all will start with your first steps on studying programming, a very innocent and and naive programming, i mean, your very first “Hello World” and the classics “Read 3 inputs and print the sum of them”, where your concerns will happen because of some missing commas, whitespaces and some misplaced IF’s… things that at first sight may cause a little confusion, you’ll start to think that’s even something hard.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include
int main(){
printf("Hello World");
return (0);
}
</code></pre>
</div>

<p>The time will pass, you’ll start to understand logic better, and get impressed with your first program written with 150 lines of pure java code, and this will be you amazed about it</p>

<p><img src="/content/images/2015/06/amazed.png" alt="images" /></p>

<h3 id="now-youve-become-a-programmer-or-even-better-a-software-engineer-right-we-shall-answer-that-soon-lets-continue-our-timeline"><strong>Now you’ve become a programmer, or even better, a <em>software engineer</em>, right?! we shall answer that soon, let’s continue our timeline…</strong></h3>

<p>You’ll commit yourself to do your first not-so-trivial software project, maybe a stock management system, using some sort of web technology and data persistence with some cool database system. After a few days and some effort, you’ll finish your project and get even more amazed…1500 lines of code!!</p>

<p>Until happen the first problem with your system and you gotta fix it, and you will have to come back to it after 1 month without looking at its code and your first reaction, probably, will be this:</p>

<p><img src="/content/images/2015/06/scared.jpeg" alt="images" /></p>

<p>And you start to suspect <em>“Well…maybe i’m not this Software Engineer thing yet”</em></p>

<p>From this point, you start to study some software development principles, design patterns and how to write reusable and maintainable code and all this stuff. Uff…finally, now you’ll think <em>“i feel more professional now”</em> and that finally you can deal with the industrial world, so you’ll come to a important step:</p>

<h3 id="its-time-to-get-a-software-engineering-internship"><strong>“it’s time to get a software engineering internship”</strong></h3>

<p>Well, I will tell you the consequences from this important decision in 3 phases:</p>

<h3 id="phase-1new-technologies-to-study">Phase 1 — New technologies to study</h3>

<p>After a short search for a internship opportunity, a software company finally will hire you as an intern, and you, with all your experience dealing with code bases that you created by yourself <em>(getting the mark of even 2 thousand lines of code, wow!)</em> will <em>think</em> that you’re prepared… So your manager says some new stuff to study, so you can understand the technologies of the company: J2EE, JPA, Hibernate, JSF, HTTP, FTP, JavaScript, Jquery, AJAX among others, well, you’ll be a little shocked at first, that’s normal, but anyway, you, <strong>strong programmer</strong>, affirms <em>“it’s okay, i can learn it quickly”</em></p>

<p>what bring us to the big shock that is the phase 2…</p>

<h3 id="phase-2-the-company-show-to-you-their-legacy-systems">Phase 2— The company show to you their legacy systems</h3>

<p>Ok, then you studied every concept that were indicated to you to learn on <strong>phase 1</strong>, so, you, with all experience that you have <em>(because you wrote 2 thousand lines of code, right?)</em>, affirms <em>“ I’m ready to work with the company’s systems ”</em>, then, your manager shows to you their system that was written in java, <strong><em>10 years ago, with a total of 700 thousand lines of code without documentation</em></strong> and he says:</p>

<p><em>— “You will be responsible by the maintenance of this system, here’s the code, study it, good luck!”</em></p>

<p>And you, <em>programmer</em>, looks to the code, runs the system, looks to the code again…and your <em>only</em> reaction is:</p>

<p><img src="/content/images/2015/06/depressive.png" alt="images" /></p>

<p>And this is the time that you’ll start to doubt about the universe’s laws. You’ll start to think that nothing makes sense anymore and all your knowledge was a lie…after all…</p>

<p><em>“seriously, what the fuck is this? there’s no way to understand this code, it’s giant, messy, old and nothing makes sense” </em>— you think.</p>

<p><img src="/content/images/2015/06/matrix.gif" alt="This is what the code looks like to you" /></p>

<p>And then, the desperation takes over your thoughts, you realize that everything you learnt on your classes and on <em>codecademy</em> was very different of the real world systems, you don’t know where to start…but after read the code 10000000 times…you, in a <strong>magic</strong> way, gets to the <strong>phase 3</strong>.</p>

<h3 id="phase-3-the-discovery">Phase 3— The discovery</h3>

<p>After much effort and lost nights, you, magically, starts to see patterns in these many lines of code, you start to see a logical flow and the most important thing:</p>

<h3 id="you-start-to-realize-that-even-a-uncommented-code-has-the-power-to-tell-you-a-story">You start to realize that even a uncommented code has the power to tell you a story</h3>

<p><em>“A story? how is that possible?”</em></p>

<p>Exactly, the more time you spent there trying to understand the code, more you started to see <strong>patterns</strong>, it’s like the code could talk by itself, telling what problems they were trying to solve, it’s like you were present at that time when the old engineers were doing a <em>brainstorm</em> to find the solution to certain problem</p>

<p>And you, young future engineer, start to see the logical flow inside those 700 thousand lines of code, and strange as it may sound, you start to mentally talk with the code, and the most amazing, the code starts to answer to you, and it gives you tips and paths to follow so you can understand it better.</p>

<p>And suddenly you reached a state of mental ecstasy, so all your powers got back to your hands and all this messy and dirty code starts to make sense and gain shape:</p>

<p><img src="/content/images/2015/06/matrix2.jpeg" alt="images" /></p>

<p>And then, the following quote from <em>Eric Filson</em> makes a huge sense in your life:</p>

<h3 id="the-art-of-programming-is-finding-patterns-where-others-see-only-chaos"><em>“The art of programming is finding patterns where others see only chaos”</em></h3>

<p>Yes, this is where you really start your love story with the art of software writing, is where you create your extreme connection between your mind and the code, is where you, temporarily, disconnect from the real world and connect yourself to new others universes: <strong>Your systems</strong>.</p>

<p>Where new laws are created and you understand all of them, yes, all of them. Universes which you have total control and you like it. At this moment is created an emotional bond between you and the system, you created it, you own your own universe, use it with responsability, after all, thousand people depend on it.</p>

<p><strong>No matter what happen, don’t give up to understand the logical flow of your new universe, the key to this comprehension is to stay mentally connected to the system, feel it, live it, walk inside it just like the processor, step by step, line by line, command by command, trust me</strong></p>

<h2 id="you-will-find-the-pattern-inside-the-chaos"><strong>You will find the pattern inside the chaos.</strong></h2>

      </p>
    </div>
    

    

</section>


        <footer>
  &copy; 2017 Rodrigo Araujo 
</footer>

        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>


</body>
</html>
