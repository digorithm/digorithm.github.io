<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/designTemplate.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<style type="text/css">
  .centeredImage
    {
    text-align:center;
    margin-top:0px;
    margin-bottom:0px;
    padding:0px;
    }
</style>


<meta name="description" content="Learn how to make a simple crud with java, mysql and JSP"/>


<meta name="keywords" content="Java, mysql, jsp, jsf, crud, example, software, engineering, architecture, design"/>


<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Rodrigo Araújo ::: Software Engineer / Computer Scientist</title>


<!-- InstanceEndEditable -->

<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href="../../../../../css/stylesheet.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="../../../../../css/styles/github.css">
<script src="../../../../../highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script><!--[if IE]>

<style type="text/css"> 
/* place css fixes for all versions of IE in this conditional comment */
.twoColHybRtHdr #sidebar1 { padding-top: 30px; }
.twoColHybRtHdr #mainContent { zoom: 1; padding-top: 15px; }
/* the above proprietary zoom property gives IE the hasLayout it may need to avoid several bugs */
</style>
<![endif]-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

</head>

<body class="twoColHybRtHdr">
        <div class="sidebar" style="height:100%;">
<div id="container"><!-- InstanceBeginEditable name="headerNav" -->
  <div id="header" style='margin-top:-55px; padding-top:25px;'>
    
      <tr>
        <h1><a href="../../../../../index.html">Rodrigo Araújo</a></h1>
      </tr>
        <h4>Software Engineer & Computer Scientist</h4>

    
    <tr>
    </tr>
    <tr>
      <h3 style="padding-top:10px; margin-left:2px;">
        <!--<a href="./HomePage.html"><img src="./images/back.png" width="15"></a>
              <tr>
        <td>&nbsp;</td>
      </tr><-->

        <a href="/blog/" onclick="">BLOG    &nbsp;&nbsp;</a> 
        <a href="/about/">ABOUT    &nbsp;&nbsp;</a>
        <a href="/work/">WORK    &nbsp;&nbsp;</a>
        <a href="/contact/">CONTACT    &nbsp;&nbsp;</a>
      </h3>
    </tr>
    
    <!-- end #header -->
  </div>
  <div style="width:400px; margin-top:0px;" id="sidebar">
       <ul style="padding-top: 18px;">
               <hr/>
          <li style="font-size:22px;"><a href="/archives/">Archives</a></li>
          <hr/>
      </ul>
</div> 

  <div style="margin-left:235px;margin-top:-128px;" id="mainContent" class="hidden">
          <h1> <div style="margin-top:-10px;line-height:1.2em;">CRUD with Java, JSP and MySQL </div></h1>
          <div style="margin-top:-20px;color:#E11F00;">22 July 2014</div>
          &nbsp;
    <p>One of the most common kind of applications in today's tech/business world is the CRUD system, that is the idea of the user interacting with a database, so the user can Create, Retrieve, Update and Delete <em>(yep, that awful name came from this)</em> data from this database. Also, <strong>learning how to create a CRUD with a language is a great way to understand the basics of this language, the basics of software design, engineering and architecture.</strong> In layman's term, a CRUD page is just a page where you can insert a thing, edit that thing, search that thing and delete that thing, just that!</p>
&nbsp;
<h3>Our goal</h3>
<p>Well, our scenario will be the simplest possible, so we can understand how to communicate with our database, so, it will be a simple contact book web app where we can do our CRUD with persons. This person will have <!--more--> a name, a phone number and a profession. We'll have a button to add a new person, a form to enter this new person's information, a page where will be loaded all persons from the database and buttons to edit and remove each person</p>
<div><img src="/images/smallcrudscreen-1024x300.png" width=700 height=200 /></div>
&nbsp;
&nbsp;
<h3>Our Technology Stack</h3>
<p>We'll be using Java as our backend technology, Java ServerPages(JSP) as our view technology and MySQL as our relational database. Also, we'll be using the MVC architecture, which is the idea of separating the code by <em><strong>M</strong>odel</em>, <em><strong>V</strong>iew</em> and <em><strong>C</strong>ontroller</em>, that's a whole other topic to study, you can take a look <a href="http://blog.codinghorror.com/understanding-model-view-controller/">here</a>, <a href="http://code.tutsplus.com/tutorials/mvc-for-noobs--net-10488">here</a> and <a href="http://www.bennadel.com/blog/2379-a-better-understanding-of-mvc-model-view-controller-thanks-to-steven-neiland.htm">here</a>!</p>
<p>For those who doesn't know JSP technology, I highly advice to study just a little bit of it before read this article, as this will be our main view technology, it's a great abstraction over the <a href="http://www.ntu.edu.sg/home/ehchua/programming/java/JavaServlets.html">Servlets</a> technology. It simply helps to process Java code on our pages <em>without putting pure java syntax in the middle of our HTML</em>, which would be extremely ugly and hard to maintain.</p>
&nbsp;
<h3>The Data Access Object (DAO) pattern</h3>
<p>The DAO pattern is a great way to abstract the communication with our database, simply put, the ObjectDAO is a class that will implement the CRUD methods of the Object. This way, our entity class, which is a Java class with only its attributes and their respective getters and setters, won't have to deal directly with the database, you can read more about the DAO pattern <a href="http://www.oracle.com/technetwork/java/dataaccessobject-138824.html">here</a>.</p>
&nbsp;
<h3>The JDBC</h3>
<p>This will be the driver that will abstract the connection with the database, it's pretty simple to use and it's the standard of the oracle, you can read more about it <a href="http://www.oracle.com/technetwork/java/overview-141217.html">here</a>.</p>
<p><strong>Finally, the final view of our scenario</strong></p>
<img src="/images/SmallCRUD1.png"width="642" height="362" />
<p>And, for any guidance, here's the <strong>project hierarchy</strong>:</p>
<img src="/images/smallcrudhierarchy.png" width="268" height="474" />
&nbsp;
<h3>Creating the Database</h3>
<p>Small and simple step, just create the MySQL scheme that we'll use on this project, that is, just a table person, with name, profession and phone. Here's the code:</p>
<pre>
<code class="sql hljs">
CREATE TABLE IF NOT EXISTS `smallcrud`.`person` (
  `idperson` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `phone` VARCHAR(45) NOT NULL,
  `profession` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idperson`))
</code>
</pre>
&nbsp;
<h3>Creating the model</h3>
<p>We'll create the Person, which will be our Java Bean for Person.</p><pre>
<code class="java hljs">
package model;

public class Person {

    public Person() {

    }

    public String name;
    public String phone;
    public String profession;
    public int personId;

    public int getPersonId() {
        return personId;
    }

    public void setPersonId(int personId) {
        this.personId = personId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getProfession() {
        return profession;
    }

    public void setProfession(String profession) {
        this.profession = profession;
    }
}
</code>
</pre>

<pre class="lang:java decode:true" title="Person.java" data-url="https://raw.githubusercontent.com/digorithm/SmallCRUD/master/src/java/model/Person.java"></pre>
<h3>Creating the connection class</h3>
<p>The connection class will be the responsible for the connection with the database, using the JDBC API, it's fair simple:</p>  

<pre>
<code class="java hljs">
package dao;

import java.sql.Statement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class ConnectionClass {

    public Connection getConnection()
            throws SQLException {
        DriverManager.registerDriver(new com.mysql.jdbc.Driver());
        return DriverManager.getConnection(
                "jdbc:mysql://localhost:3306/simplecrud", "root", "sa");

    }

}
</code>
</pre>

<p><em><strong>!important: </strong>These Strings "jdbc:mysql://localhost:3306/simplecrud", "root", "sa" depends on the configuration of the database that you created, the first one is the URI of the database, the second "root" is the user of that database, and the last "sa" is the password of that database</em></p>

<p>So, what happens when we use this class? Every time we call its method "getConnection" it returns a Connection with the database, that will be useful to create Statements, execute SQL Queries and plenty <a href="http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html">more</a>.</p>
&nbsp;
<h3>Creating the PersonDAO</h3>
<p>The PersonDAO will be the class that will manipulate the class Person and communicate with the database, sending persons to database, updating persons, retrieving persons from the DB, which means, the CRUD main methods</p
>
<pre>
<code class="java hljs">
package dao;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import model.Person;

public class PersonDAO {

    private Connection connection;

    public PersonDAO() {
        ConnectionClass con = new ConnectionClass();
        try {
            connection = con.getConnection();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public void addPerson(Person person) {
        try {
            String query = "insert into person(name, phone, profession) 
values ('" + person.getName() + "', '" + person.getPhone() + "', '" + person.getProfession() + "')";

            Statement stmt = connection.createStatement();
            stmt.executeUpdate(query);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public void removePerson(int personid) {
        String query = "delete from person where person.idperson = " + personid + " ";
        try {
            Statement stmt = connection.createStatement();
            stmt.executeUpdate(query);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public void updatePerson(Person person) {
        String query = "update person set person.name='" + person.getName() + "', person.phone='" + person.getPhone()
                + "', person.profession='" + person.getProfession() + "' where person.idperson = " + person.getPersonId() + " ";
        System.out.println(query);
        try {
            Statement stmt = connection.createStatement();
            stmt.executeUpdate(query);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public ArrayList<Person> getPersons() throws SQLException {
        String query = "select * from person";
        ArrayList<Person> persons = new ArrayList<Person>();
        Statement stmt = connection.createStatement();
        ResultSet res = stmt.executeQuery(query);
        while (res.next()) {
            Person person = new Person();
            person.setName(res.getString("name"));
            person.setPhone(res.getString("phone"));
            person.setProfession(res.getString("profession"));
            person.setPersonId(res.getInt("idperson"));
            persons.add(person);
        }
        return persons;
    }

    public Person getPersonById(int personid) throws SQLException {
        Person person = new Person();
        String query = "select * from person where person.idperson = " + personid + " ";
        Statement stmt = connection.createStatement();
        ResultSet res = stmt.executeQuery(query);
        if (res.next()) {
            person.setName(res.getString("name"));
            person.setPhone(res.getString("phone"));
            person.setProfession(res.getString("profession"));
            person.setPersonId(res.getInt("idperson"));
        }
        return person;
    }
}
</code>
</pre>
&nbsp;
<h3>Creating the Controller</h3>

<p>This is the most confusing part. All because of the confusion of <strong>not</strong> using JSP file to process the request, so what we will use? <strong>Servlets! </strong> A Servlet fits better in the Controller role, because they won't show anything to the user, it will only get the request data, verify which action the user is trying to make, do something and redirect the user to another page. If you're using JSP files as controllers, probably you're <a href="http://www.geekinterview.com/question_details/37537">doing it wrong</a>. So, basically, our PersonController will take the user request, see if the user is trying to edit, insert, update, remove or retrieve... and do the right thing, pay extremely attention to this code</p>
<pre>
<code class="java hljs">
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

import dao.PersonDAO;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.SQLException;
import java.util.ArrayList;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import model.Person;

/**
 *
 * @author rodrigo
 */
@WebServlet(name = "PersonController", urlPatterns = {"/PersonController"})
public class PersonController extends HttpServlet {

    private static final long serialVersionUID = 1L;
    private static String insert_or_edit = "/Person.jsp";
    private static String list_person = "/ListPerson.jsp";
    private PersonDAO persondao;

    public PersonController() {
        super();
        persondao = new PersonDAO();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String forward = "";
        String action = request.getParameter("action");
        if (action.equalsIgnoreCase("delete")) {
                        // the other page is sending the person id, so we can get here and
            // call the remove method
            int personid = Integer.parseInt(request.getParameter("personId"));
            // we remove the person from the database
            persondao.removePerson(personid);
                        // set the forward string to list and put all persons in request
            // attribute so we can use them inside the other page
            forward = list_person;
            try {
                request.setAttribute("persons", persondao.getPersons());
            } catch (SQLException e) {
                e.printStackTrace();
            }
            // if the user is trying to edit a person
        } else if (action.equalsIgnoreCase("edit")) {

            forward = insert_or_edit;
            int personid = Integer.parseInt(request.getParameter("personId"));
            try {
                Person person = persondao.getPersonById(personid);
                request.setAttribute("person", person);
            } catch (SQLException e) {
                e.printStackTrace();
            }

        } else if (action.equalsIgnoreCase("listPerson")) {
            forward = list_person;
            try {
                request.setAttribute("persons", persondao.getPersons());
            } catch (SQLException e) {
                e.printStackTrace();
            }
        } else {
            forward = insert_or_edit;
        }
        RequestDispatcher view = request.getRequestDispatcher(forward);
        view.forward(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Person person = new Person();
        person.setName(request.getParameter("name"));
        person.setPhone(request.getParameter("phone"));
        person.setProfession(request.getParameter("profession"));        
        String personid = request.getParameter("personId");
         System.out.println("ola");
        System.out.println(personid);
                // what i'm trying to mean here is: if the personid coming from the
        // request is null
        // then, the user is trying to add someone, otherwise, he's trying to
        // update someone
        if (personid == null || personid.isEmpty()) {
            persondao.addPerson(person);
        } else {
            person.setPersonId(Integer.parseInt(personid));
            persondao.updatePerson(person);
        }

        response.sendRedirect(request.getContextPath() + "/index.jsp");
    }

}
</code>
</pre>
<h3>Creating the View: Index.jsp</h3>

<p>The index will be pretty simple and straight forward, it will just call our controller, passing the action by the get method, in this case, the ListPerson, the Controller will see that the action required is the ListPerson so it will do what it has to do, get all users from the database and list'em.</p>

<pre>
<code class="html hljs">
<%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"%>
&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
        &lt;title>gt;Insert title here&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;jsp:forward page="/PersonController?action=listperson" /&gt;
    &lt;/body&gt;
&lt;/html&gt;

</code>
</pre>

<h3>Creating the View: ListPerson.jsp</h3>

<p>The controller got the action coming from the index and tried to retrieve every person in the database and put all person objects in the session, if there is any Person in the DB, of course. Here is the code to do it, as you can see we're already using the JSP tags to not use pure Java Scriplets</p>

<pre>
<code class="html hljs">
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!doctype html>

&lt;html lang="en">
&lt;head>
                
&lt;meta charset="utf-8">
&lt;meta http-equiv="X-UA-Compatible" content="IE=edge">
&lt;meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
&lt;title>Test page&lt;/title>

&lt;link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
&lt;link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
&lt;link href="bootstrap.css" rel="stylesheet">
&lt;/head>
        &lt;body>
        
        &lt;div class="wrap">
        &lt;section>
            &lt;div class="container">
                    &lt;table class="table table-hover">
                            &lt;thead>
                                    &lt;tr>
                                            &lt;th>
                                                    #
                                            &lt;/th>
                                            &lt;th>
                                                    Name
                                            &lt;/th>
                                            &lt;th>
                                                    Phone Number
                                            &lt;/th>
                                            &lt;th>
                                                    Profession
                                            &lt;/th>
                                    &lt;/tr>
                            &lt;/thead>
                            &lt;tbody>
                                    &lt;c:forEach items="${persons}" var="person">
                                            &lt;tr>
                                                    &lt;td>
                                                            &lt;c:out value="${person.personId}"/>
                                                    &lt;/td>
                                                    &lt;td>
                                                            &lt;c:out value="${person.name}"/>
                                                    &lt;/td>
                                                    &lt;td>
                                                            &lt;c:out value="${person.phone}"/>
                                                    &lt;/td>
                                                    &lt;td>
                                                            &lt;c:out value="${person.profession}"/>
                                                    &lt;/td>
                                                    &lt;td>&lt;a href="PersonController?action=edit&personId=<lt;c:out value="${person.personId}"/>">Update&lt;/a>&lt;/td>
                                                    &lt;td>&lt;a href="PersonController?action=delete&personId=<lt;c:out value="${person.personId}"/>">Delete&lt;/a>&lt;/td>
                                            &lt;/tr>
                                    &lt;/c:forEach>
                            &lt;/tbody>
                    &lt;/table>
            &lt;a href="PersonController?action=insert" role="button" class="btn btn-info btn-lg" data-toggle="modal">Add new person&lt;/a>   
            &lt;/div>
        &lt;/section>      
&lt;/div>

&lt;script src="https://code.jquery.com/jquery-1.10.2.min.js">&lt;/script>
&lt;script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js">&lt;/script>

&lt;/body>
&lt;/html>
</code>
</pre>

<h3>Creating the View: Person.jsp</h3>
<p>This will be the page that the user will be able to insert or edit a Person in the database so it can be loaded on the ListUser.jsp. As the Controller says, if the request has an ID, the Person.jsp will be loaded with a Person, otherwise, it won't. (<em>expecting that the user fill the form to add a new Person to the database</em>)</p>

<a href="http://www.universocomputacao.com/wp-content/uploads/2014/07/smallcrudscreen2.png"><img class="aligncenter wp-image-74 size-medium" src="http://www.universocomputacao.com/wp-content/uploads/2014/07/smallcrudscreen2-300x263.png" alt="smallcrudscreen2" width="300" height="263" /></a>

<pre>
<code class="html hljs">

<%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
&lt;html>
    &lt;head>
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        &lt;title>Insert title here<lt;/title>
        &lt;link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
        &lt;link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
        &lt;link href="Resource/bootstrap.css" rel="stylesheet">
    &lt;/head>
    &lt;body>
        &lt;div class="container">
            &lt;form method="POST" action='PersonController' name="frmAddPerson" role="form">
                 
                
                &lt;div class="form-group">
                    &lt;label for="personid">
                        id: &lt;input class="form-control" type="number" id="personId" name="personId" readonly value=<lt;c:out value="${person.personId}" /> />
                    &lt;/label>
                &lt;/div>
                &lt;div class="form-group">
                    &lt;label for="name">
                        Name:&lt;input class="form-control" type="text" id="name" name="name" value="&lt;c:out value="${person.name}" />" />
                    &lt;/label>
                &lt;/div>
                &lt;div class="form-group">
                    &lt;label for="phone">
                        Phone: &lt;input class="form-control" type="text" name="phone" value="&lt;c:out value="${person.phone}" />" /> 
                    &lt;/label>
                &lt;/div>
                &lt;div class="form-group">
                    &lt;label for="profession">
                        Profession: &lt;input class="form-control" type="text" name="profession" value="&lt;c:out value="${person.profession}" />" />
                    &lt;/label>
                &lt;/div>
                &lt;input type="submit" value="Submit" class="btn btn-info" />
            &lt;/form>
        &lt;/div>
        &lt;script src="https://code.jquery.com/jquery-1.10.2.min.js"><lt;/script>
        &lt;script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"><lt;/script>
    &lt;/body>
&lt;/html>

</code>
</pre>

<h3>Last details and conclusion</h3>
<p>As you can see, at the first sight this implementation can be a little confusing, mainly because of the flow logic and the controller built with Servlet, understanding the flow means understanding it as a whole. Make sure you understand the MVC logic and the concepts behind JSP, Servlets and JDBC.</p>

<p>If you're trying to copy the whole code, make sure you import the right libs, including the JSTL, responsible for a few tags I've used in this code. Also i used the Twitter's Bootstrap to help me with the frontend UI.</p>

<p>You can download the code here on my <a href="https://github.com/digorithm/SmallCRUD">GitHub</a></p>

<p>If there's something wrong with your implementation, please let me know, drop me an email or post a comment here and I'll make sure it will work properly! :]</p>


<hr/>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    // Required: on line below, replace text in quotes with your forum shortname
    var disqus_shortname = 'rodrigoaraujo';
        
        /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                                        
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



  </div>
  </div>

<!-- InstanceEndEditable --><!-- InstanceBeginEditable name="subNav" --><!-- InstanceEndEditable --><!-- InstanceBeginEditable name="mainContent" --><!-- InstanceEndEditable -->
  <!-- This clearing element should immediately follow the #mainContent div in order to force the #container div to contain all child floats -->
  <br class="clearfloat" />
  <!-- InstanceBeginEditable name="footer" -->
  <div id="footer">
    <!-- end #footer -->
    </div>
  <!-- InstanceEndEditable -->
  <!-- end #container --></div>
    

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>

<script>

var fixmeTop = $('#sidebar').offset().top;       // get initial position of the element

$(window).scroll(function() {                  // assign scroll event listener

    var currentScroll = $(window).scrollTop(); // get current position

    if (currentScroll >= fixmeTop) {           // apply position: fixed if you
        $('#sidebar').css({                      // scroll to that element or below it
            position: 'fixed',
            top: '0',
	    'margin-top':'0',
            //left: '0'
        });
    } else {                                   // apply position: static
        $('#sidebar').css({                      // if you scroll above it
            position: 'static',
            'margin-top': '0px'
        });
    }

});


$(document).ready(function(){
    // to fade in on page load
   $("#mainContent").fadeIn(1500).removeClass("hidden");
   $('a').click(function(e){
        redirect = $(this).attr('href');
        e.preventDefault();
        $('#mainContent').fadeOut(500, function(){
            document.location.href = redirect
        });
    });
})

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38327934-3', 'auto');
  ga('send', 'pageview');

</script>
<!-- InstanceEnd --></html>
